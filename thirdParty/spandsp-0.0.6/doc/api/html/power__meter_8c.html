<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spandsp: power_meter.c File Reference</title>
<link href="css.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_0e7c2593c17df2b8598d85d379ada763.html">src</a></div>
<h1>power_meter.c File Reference</h1><code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;float.h&gt;</code><br>
<code>#include &quot;floating_fudge.h&quot;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include &quot;spandsp/telephony.h&quot;</code><br>
<code>#include &quot;spandsp/power_meter.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#f86fba1b93b57324ac836c868056a5ea">power_meter_init</a> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s, int shift)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise a power meter context.  <a href="#f86fba1b93b57324ac836c868056a5ea"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cf22c657d275a447cf1b32ee70f094c5"></a><!-- doxytag: member="power_meter.c::power_meter_release" ref="cf22c657d275a447cf1b32ee70f094c5" args="(power_meter_t *s)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>power_meter_release</b> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3f7f65597fb0bb9f7a2f8fc2def9bde0"></a><!-- doxytag: member="power_meter.c::power_meter_free" ref="3f7f65597fb0bb9f7a2f8fc2def9bde0" args="(power_meter_t *s)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>power_meter_free</b> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#91c12fc7d6c88645e0c2fb40d4640942">power_meter_damping</a> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s, int shift)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the damping factor of a power meter context.  <a href="#91c12fc7d6c88645e0c2fb40d4640942"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#7d46b437bd69f8f66008a1173d6851b4">power_meter_update</a> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s, int16_t amp)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Update a power meter.  <a href="#7d46b437bd69f8f66008a1173d6851b4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#3c671c0683ec2be19b1605cc479f1b92">power_meter_level_dbm0</a> (float level)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current power meter reading, in dBm0.  <a href="#3c671c0683ec2be19b1605cc479f1b92"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#713b6d674270e41aaac9300261dfdecc">power_meter_level_dbov</a> (float level)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current power meter reading, in dBOv.  <a href="#713b6d674270e41aaac9300261dfdecc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#27ee0c99183bd6a81337ee4a216eefd6">power_meter_current</a> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current power meter reading.  <a href="#27ee0c99183bd6a81337ee4a216eefd6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#be34fa74773f1e92286bce9ac7bc300d">power_meter_current_dbm0</a> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current power meter reading, in dBm0.  <a href="#be34fa74773f1e92286bce9ac7bc300d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#c64ebf94c6cc34f4cab0f7a53e25a946">power_meter_current_dbov</a> (<a class="el" href="structpower__meter__t.html">power_meter_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current power meter reading, in dBOv.  <a href="#c64ebf94c6cc34f4cab0f7a53e25a946"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="334f53f97cd89e0b8a102f4c5245704b"></a><!-- doxytag: member="power_meter.c::power_surge_detector" ref="334f53f97cd89e0b8a102f4c5245704b" args="(power_surge_detector_state_t *s, int16_t amp)" -->
int32_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>power_surge_detector</b> (power_surge_detector_state_t *s, int16_t amp)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#90597fa1a77a07f914f3e9021352a6cb">power_surge_detector_current_dbm0</a> (power_surge_detector_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current surge detector meter reading, in dBm0.  <a href="#90597fa1a77a07f914f3e9021352a6cb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">float&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="power__meter_8c.html#a7600f0497601bbf213b1b05e057a761">power_surge_detector_current_dbov</a> (power_surge_detector_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the current surge detector meter reading, in dBOv.  <a href="#a7600f0497601bbf213b1b05e057a761"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cf1432089bd5e80afb358b20b1756639"></a><!-- doxytag: member="power_meter.c::power_surge_detector_init" ref="cf1432089bd5e80afb358b20b1756639" args="(power_surge_detector_state_t *s, float min, float surge)" -->
power_surge_detector_state_t *&nbsp;</td><td class="memItemRight" valign="bottom"><b>power_surge_detector_init</b> (power_surge_detector_state_t *s, float min, float surge)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4198f9b298705cf4ddee551352506fd4"></a><!-- doxytag: member="power_meter.c::power_surge_detector_release" ref="4198f9b298705cf4ddee551352506fd4" args="(power_surge_detector_state_t *s)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>power_surge_detector_release</b> (power_surge_detector_state_t *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="734cda54401156e4af04b4583b6dae3f"></a><!-- doxytag: member="power_meter.c::power_surge_detector_free" ref="734cda54401156e4af04b4583b6dae3f" args="(power_surge_detector_state_t *s)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>power_surge_detector_free</b> (power_surge_detector_state_t *s)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="27ee0c99183bd6a81337ee4a216eefd6"></a><!-- doxytag: member="power_meter.c::power_meter_current" ref="27ee0c99183bd6a81337ee4a216eefd6" args="(power_meter_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t power_meter_current           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current power meter reading. 
<p>
Get the current power meter reading. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power meter context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current power meter reading. </dd></dl>

</div>
</div><p>
<a class="anchor" name="be34fa74773f1e92286bce9ac7bc300d"></a><!-- doxytag: member="power_meter.c::power_meter_current_dbm0" ref="be34fa74773f1e92286bce9ac7bc300d" args="(power_meter_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float power_meter_current_dbm0           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current power meter reading, in dBm0. 
<p>
Get the current power meter reading, in dBm0. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power meter context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current power meter reading, in dBm0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c64ebf94c6cc34f4cab0f7a53e25a946"></a><!-- doxytag: member="power_meter.c::power_meter_current_dbov" ref="c64ebf94c6cc34f4cab0f7a53e25a946" args="(power_meter_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float power_meter_current_dbov           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current power meter reading, in dBOv. 
<p>
Get the current power meter reading, in dBOv. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power meter context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current power meter reading, in dBOv. </dd></dl>

</div>
</div><p>
<a class="anchor" name="91c12fc7d6c88645e0c2fb40d4640942"></a><!-- doxytag: member="power_meter.c::power_meter_damping" ref="91c12fc7d6c88645e0c2fb40d4640942" args="(power_meter_t *s, int shift)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpower__meter__t.html">power_meter_t</a>* power_meter_damping           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>shift</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the damping factor of a power meter context. 
<p>
Change the damping factor of a power meter context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power meter context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shift</em>&nbsp;</td><td>The new shift to be used by the IIR filter. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The power meter context. </dd></dl>

</div>
</div><p>
<a class="anchor" name="f86fba1b93b57324ac836c868056a5ea"></a><!-- doxytag: member="power_meter.c::power_meter_init" ref="f86fba1b93b57324ac836c868056a5ea" args="(power_meter_t *s, int shift)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structpower__meter__t.html">power_meter_t</a>* power_meter_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>shift</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise a power meter context. 
<p>
Initialise a power meter context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power meter context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>shift</em>&nbsp;</td><td>The shift to be used by the IIR filter. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The power meter context. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3c671c0683ec2be19b1605cc479f1b92"></a><!-- doxytag: member="power_meter.c::power_meter_level_dbm0" ref="3c671c0683ec2be19b1605cc479f1b92" args="(float level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t power_meter_level_dbm0           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>level</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current power meter reading, in dBm0. 
<p>
Get the power meter reading which represents a specified power level in dBm0. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>A power level, in dB0m. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The equivalent power meter reading. </dd></dl>

</div>
</div><p>
<a class="anchor" name="713b6d674270e41aaac9300261dfdecc"></a><!-- doxytag: member="power_meter.c::power_meter_level_dbov" ref="713b6d674270e41aaac9300261dfdecc" args="(float level)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t power_meter_level_dbov           </td>
          <td>(</td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>level</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current power meter reading, in dBOv. 
<p>
Get the power meter reading which represents a specified power level in dBOv. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>A power level, in dBOv. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The equivalent power meter reading. </dd></dl>

</div>
</div><p>
<a class="anchor" name="7d46b437bd69f8f66008a1173d6851b4"></a><!-- doxytag: member="power_meter.c::power_meter_update" ref="7d46b437bd69f8f66008a1173d6851b4" args="(power_meter_t *s, int16_t amp)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t power_meter_update           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structpower__meter__t.html">power_meter_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>amp</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Update a power meter. 
<p>
Update a power meter. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power meter context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>amp</em>&nbsp;</td><td>The amplitude of the new audio sample. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current power meter reading. </dd></dl>

</div>
</div><p>
<a class="anchor" name="90597fa1a77a07f914f3e9021352a6cb"></a><!-- doxytag: member="power_meter.c::power_surge_detector_current_dbm0" ref="90597fa1a77a07f914f3e9021352a6cb" args="(power_surge_detector_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float power_surge_detector_current_dbm0           </td>
          <td>(</td>
          <td class="paramtype">power_surge_detector_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current surge detector meter reading, in dBm0. 
<p>
Get the current surge detector short term meter reading, in dBm0. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power surge detector context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current power surge detector power reading, in dBm0. </dd></dl>

</div>
</div><p>
<a class="anchor" name="a7600f0497601bbf213b1b05e057a761"></a><!-- doxytag: member="power_meter.c::power_surge_detector_current_dbov" ref="a7600f0497601bbf213b1b05e057a761" args="(power_surge_detector_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">float power_surge_detector_current_dbov           </td>
          <td>(</td>
          <td class="paramtype">power_surge_detector_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the current surge detector meter reading, in dBOv. 
<p>
Get the current surge detector short term meter reading, in dBOv. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The power surge detector context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current power surge detector power reading, in dBOv. </dd></dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Mar 17 10:16:37 2010 for spandsp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
