<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spandsp: silence_gen.c File Reference</title>
<link href="css.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_0e7c2593c17df2b8598d85d379ada763.html">src</a></div>
<h1>silence_gen.c File Reference</h1><code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &quot;floating_fudge.h&quot;</code><br>
<code>#include &lt;assert.h&gt;</code><br>
<code>#include &lt;limits.h&gt;</code><br>
<code>#include &quot;spandsp/telephony.h&quot;</code><br>
<code>#include &quot;<a class="el" href="logging_8h-source.html">spandsp/logging.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="async_8h-source.html">spandsp/async.h</a>&quot;</code><br>
<code>#include &quot;spandsp/silence_gen.h&quot;</code><br>
<code>#include &quot;spandsp/private/silence_gen.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="354c8e05117a1aa19bf55e8a5fb42f12"></a><!-- doxytag: member="silence_gen.c::silence_gen" ref="354c8e05117a1aa19bf55e8a5fb42f12" args="(silence_gen_state_t *s, int16_t *amp, int max_len)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>silence_gen</b> (silence_gen_state_t *s, int16_t *amp, int max_len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#a2190d82a8f04eea6f9ef7f6e3d12021">silence_gen_always</a> (silence_gen_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a silence generator context to output continuous silence.  <a href="#a2190d82a8f04eea6f9ef7f6e3d12021"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#f535982f2db946d0405509ed0114d9ca">silence_gen_set</a> (silence_gen_state_t *s, int silent_samples)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a silence generator context to output a specified period of silence.  <a href="#f535982f2db946d0405509ed0114d9ca"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#f90cd7440c438ebd6cfd1a721b6ee2d1">silence_gen_alter</a> (silence_gen_state_t *s, int silent_samples)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Alter the period of a silence generator context by a specified amount.  <a href="#f90cd7440c438ebd6cfd1a721b6ee2d1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#c2439ed087436d598c1cbcd2421d08a5">silence_gen_remainder</a> (silence_gen_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find how long a silence generator context has to run.  <a href="#c2439ed087436d598c1cbcd2421d08a5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#ff5fe497ed0ffa0253150c142d7c5f16">silence_gen_generated</a> (silence_gen_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the total silence generated to date.  <a href="#ff5fe497ed0ffa0253150c142d7c5f16"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#350d73f5fe297bf243b2602a8797877c">silence_gen_status_handler</a> (silence_gen_state_t *s, <a class="el" href="async_8h.html#d0ca7b7108059c6326e92a6817b467c4">modem_tx_status_func_t</a> handler, void *user_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the status reporting function associated with a silence generator context.  <a href="#350d73f5fe297bf243b2602a8797877c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">silence_gen_state_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#ce61fbae7e45dbed9767037538b174cd">silence_gen_init</a> (silence_gen_state_t *s, int silent_samples)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise a timed silence generator context.  <a href="#ce61fbae7e45dbed9767037538b174cd"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c67d3caf0667ea5960e010c325f55c62"></a><!-- doxytag: member="silence_gen.c::silence_gen_release" ref="c67d3caf0667ea5960e010c325f55c62" args="(silence_gen_state_t *s)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>silence_gen_release</b> (silence_gen_state_t *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5e0c88c14b50b61ed1b50323a0cbdf6e"></a><!-- doxytag: member="silence_gen.c::silence_gen_free" ref="5e0c88c14b50b61ed1b50323a0cbdf6e" args="(silence_gen_state_t *s)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>silence_gen_free</b> (silence_gen_state_t *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="35252287a9a38dc26d98651c14bcebe6"></a><!-- doxytag: member="silence_gen.c::span_dummy_rx" ref="35252287a9a38dc26d98651c14bcebe6" args="(void *user_data, const int16_t amp[], int len)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>span_dummy_rx</b> (void *user_data, const int16_t amp[], int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="silence__gen_8c.html#77cdb67a49d52eb57caf04177e852ed0">span_dummy_mod</a> (void *user_data, int16_t amp[], int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Dummy signal modifier callback.  <a href="#77cdb67a49d52eb57caf04177e852ed0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ac92d9c89d74f6147de13147fd060815"></a><!-- doxytag: member="silence_gen.c::span_dummy_rx_fillin" ref="ac92d9c89d74f6147de13147fd060815" args="(void *user_data, int len)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>span_dummy_rx_fillin</b> (void *user_data, int len)</td></tr>

</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="f90cd7440c438ebd6cfd1a721b6ee2d1"></a><!-- doxytag: member="silence_gen.c::silence_gen_alter" ref="f90cd7440c438ebd6cfd1a721b6ee2d1" args="(silence_gen_state_t *s, int silent_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void silence_gen_alter           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>silent_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Alter the period of a silence generator context by a specified amount. 
<p>
Alter the period of a silence generator context by a specified amount. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>silent_samples</em>&nbsp;</td><td>The number of samples to change the setting by. A positive number increases the duration. A negative number reduces it. The duration is prevented from going negative. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="a2190d82a8f04eea6f9ef7f6e3d12021"></a><!-- doxytag: member="silence_gen.c::silence_gen_always" ref="a2190d82a8f04eea6f9ef7f6e3d12021" args="(silence_gen_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void silence_gen_always           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set a silence generator context to output continuous silence. 
<p>
Set a silence generator context to output continuous silence. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="ff5fe497ed0ffa0253150c142d7c5f16"></a><!-- doxytag: member="silence_gen.c::silence_gen_generated" ref="ff5fe497ed0ffa0253150c142d7c5f16" args="(silence_gen_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int silence_gen_generated           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the total silence generated to date. 
<p>
Find the total silence generated to date by a silence generator context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of samples generated. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ce61fbae7e45dbed9767037538b174cd"></a><!-- doxytag: member="silence_gen.c::silence_gen_init" ref="ce61fbae7e45dbed9767037538b174cd" args="(silence_gen_state_t *s, int silent_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">silence_gen_state_t* silence_gen_init           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>silent_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise a timed silence generator context. 
<p>
Initialise a timed silence generator context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>silent_samples</em>&nbsp;</td><td>The initial number of samples to set the silence to. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the silence generator context. </dd></dl>

</div>
</div><p>
<a class="anchor" name="c2439ed087436d598c1cbcd2421d08a5"></a><!-- doxytag: member="silence_gen.c::silence_gen_remainder" ref="c2439ed087436d598c1cbcd2421d08a5" args="(silence_gen_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int silence_gen_remainder           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find how long a silence generator context has to run. 
<p>
Find how long a silence generator context has to run. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of samples remaining. </dd></dl>

</div>
</div><p>
<a class="anchor" name="f535982f2db946d0405509ed0114d9ca"></a><!-- doxytag: member="silence_gen.c::silence_gen_set" ref="f535982f2db946d0405509ed0114d9ca" args="(silence_gen_state_t *s, int silent_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void silence_gen_set           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>silent_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set a silence generator context to output a specified period of silence. 
<p>
Set a silence generator context to output a specified period of silence. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>silent_samples</em>&nbsp;</td><td>The number of samples to be generated. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="350d73f5fe297bf243b2602a8797877c"></a><!-- doxytag: member="silence_gen.c::silence_gen_status_handler" ref="350d73f5fe297bf243b2602a8797877c" args="(silence_gen_state_t *s, modem_tx_status_func_t handler, void *user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void silence_gen_status_handler           </td>
          <td>(</td>
          <td class="paramtype">silence_gen_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="async_8h.html#d0ca7b7108059c6326e92a6817b467c4">modem_tx_status_func_t</a>&nbsp;</td>
          <td class="paramname"> <em>handler</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the status reporting function associated with a silence generator context. 
<p>
Change the status reporting function associated with a silence generator context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The silence generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>handler</em>&nbsp;</td><td>The callback routine used to report status changes. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>An opaque pointer. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="77cdb67a49d52eb57caf04177e852ed0"></a><!-- doxytag: member="silence_gen.c::span_dummy_mod" ref="77cdb67a49d52eb57caf04177e852ed0" args="(void *user_data, int16_t amp[], int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int span_dummy_mod           </td>
          <td>(</td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>amp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Dummy signal modifier callback. 
<p>
A dummy routine to use as a signal modifier callback, when we aren't really trying to process the signal. It just returns without affecting anything. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>The context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>amp</em>&nbsp;</td><td>The signal.buffer </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The length of the signal buffer </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0. </dd></dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Mar 17 10:16:37 2010 for spandsp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
