<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spandsp: t30.h Source File</title>
<link href="css.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_0e7c2593c17df2b8598d85d379ada763.html">src</a>&nbsp;&raquo&nbsp;<a class="el" href="dir_8c737b89cae07b24472486820dcab6b7.html">spandsp</a></div>
<h1>t30.h</h1><a href="t30_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/*</span>
<a name="l00002"></a>00002 <span class="comment"> * SpanDSP - a series of DSP components for telephony</span>
<a name="l00003"></a>00003 <span class="comment"> *</span>
<a name="l00004"></a>00004 <span class="comment"> * t30.h - definitions for T.30 fax processing</span>
<a name="l00005"></a>00005 <span class="comment"> *</span>
<a name="l00006"></a>00006 <span class="comment"> * Written by Steve Underwood &lt;steveu@coppice.org&gt;</span>
<a name="l00007"></a>00007 <span class="comment"> *</span>
<a name="l00008"></a>00008 <span class="comment"> * Copyright (C) 2003 Steve Underwood</span>
<a name="l00009"></a>00009 <span class="comment"> *</span>
<a name="l00010"></a>00010 <span class="comment"> * All rights reserved.</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> * This program is free software; you can redistribute it and/or modify</span>
<a name="l00013"></a>00013 <span class="comment"> * it under the terms of the GNU Lesser General Public License version 2.1,</span>
<a name="l00014"></a>00014 <span class="comment"> * as published by the Free Software Foundation.</span>
<a name="l00015"></a>00015 <span class="comment"> *</span>
<a name="l00016"></a>00016 <span class="comment"> * This program is distributed in the hope that it will be useful,</span>
<a name="l00017"></a>00017 <span class="comment"> * but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00018"></a>00018 <span class="comment"> * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00019"></a>00019 <span class="comment"> * GNU Lesser General Public License for more details.</span>
<a name="l00020"></a>00020 <span class="comment"> *</span>
<a name="l00021"></a>00021 <span class="comment"> * You should have received a copy of the GNU Lesser General Public</span>
<a name="l00022"></a>00022 <span class="comment"> * License along with this program; if not, write to the Free Software</span>
<a name="l00023"></a>00023 <span class="comment"> * Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139, USA.</span>
<a name="l00024"></a>00024 <span class="comment"> *</span>
<a name="l00025"></a>00025 <span class="comment"> * $Id: t30.h,v 1.126.4.1 2009/12/19 09:47:56 steveu Exp $</span>
<a name="l00026"></a>00026 <span class="comment"> */</span>
<a name="l00027"></a>00027 <span class="comment"></span>
<a name="l00028"></a>00028 <span class="comment">/*! \file */</span>
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 <span class="preprocessor">#if !defined(_SPANDSP_T30_H_)</span>
<a name="l00031"></a>00031 <span class="preprocessor"></span><span class="preprocessor">#define _SPANDSP_T30_H_</span>
<a name="l00032"></a>00032 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00033"></a>00033 <span class="comment">/*! \page t30_page T.30 FAX protocol handling</span>
<a name="l00034"></a>00034 <span class="comment"></span>
<a name="l00035"></a>00035 <span class="comment">\section t30_page_sec_1 What does it do?</span>
<a name="l00036"></a>00036 <span class="comment">The T.30 protocol is the core protocol used for FAX transmission. This module</span>
<a name="l00037"></a>00037 <span class="comment">implements most of its key featrues. It does not interface to the outside work.</span>
<a name="l00038"></a>00038 <span class="comment">Seperate modules do that for T.38, analogue line, and other forms of FAX</span>
<a name="l00039"></a>00039 <span class="comment">communication.</span>
<a name="l00040"></a>00040 <span class="comment"></span>
<a name="l00041"></a>00041 <span class="comment">Current features of this module include:</span>
<a name="l00042"></a>00042 <span class="comment"></span>
<a name="l00043"></a>00043 <span class="comment">    - FAXing to and from multi-page TIFF/F files, whose images are one of the standard</span>
<a name="l00044"></a>00044 <span class="comment">      FAX sizes.</span>
<a name="l00045"></a>00045 <span class="comment">    - V.27ter, V.29 and V.17 modes (2400bps, to 14,400bps).</span>
<a name="l00046"></a>00046 <span class="comment">    - T.4 1D (MH), T.4 2D,(MR) and T.6 (MMR) compression.</span>
<a name="l00047"></a>00047 <span class="comment">    - Error correction mode (ECM).</span>
<a name="l00048"></a>00048 <span class="comment">    - All standard horizonal resolutions (R8, R16, 300dpi, 600dpi, 800dpi, 1200dpi).</span>
<a name="l00049"></a>00049 <span class="comment">    - All standard vertical resolutions (standard, fine, superfine, 300dpi, 600dpi, 800dpi, 1200dpi).</span>
<a name="l00050"></a>00050 <span class="comment">    - All standard page widths (A4, B4, A3).</span>
<a name="l00051"></a>00051 <span class="comment">    - All standard page lengths (A4, B4, North American letter, North American legal, continuous).</span>
<a name="l00052"></a>00052 <span class="comment">    - Monitoring and sending identifier strings (CSI, TSI, and CIG).</span>
<a name="l00053"></a>00053 <span class="comment">    - Monitoring and sending sub-address strings (SUB).</span>
<a name="l00054"></a>00054 <span class="comment">    - Monitoring and sending polling sub-addresses (SEP).</span>
<a name="l00055"></a>00055 <span class="comment">    - Monitoring and sending polled sub-addresses (PSA).</span>
<a name="l00056"></a>00056 <span class="comment">    - Monitoring and sending sender identifications (SID).</span>
<a name="l00057"></a>00057 <span class="comment">    - Monitoring and sending passwords (PWD).</span>
<a name="l00058"></a>00058 <span class="comment">    - Monitoring of non-standard facility frames (NSF, NSC, and NSS).</span>
<a name="l00059"></a>00059 <span class="comment">    - Sending custom non-standard facility frames (NSF, NSC, and NSS).</span>
<a name="l00060"></a>00060 <span class="comment">    - Analogue modem and T.38 operation.</span>
<a name="l00061"></a>00061 <span class="comment"></span>
<a name="l00062"></a>00062 <span class="comment">\section t30_page_sec_2 How does it work?</span>
<a name="l00063"></a>00063 <span class="comment"></span>
<a name="l00064"></a>00064 <span class="comment">Some of the following is paraphrased from some notes found a while ago on the Internet.</span>
<a name="l00065"></a>00065 <span class="comment">I cannot remember exactly where they came from, but they are useful.</span>
<a name="l00066"></a>00066 <span class="comment"></span>
<a name="l00067"></a>00067 <span class="comment">\subsection t30_page_sec_2a The answer (CED) tone</span>
<a name="l00068"></a>00068 <span class="comment"></span>
<a name="l00069"></a>00069 <span class="comment">The T.30 standard says an answering fax device must send CED (a 2100Hz tone) for</span>
<a name="l00070"></a>00070 <span class="comment">approximately 3 seconds before sending the first handshake message. Some machines</span>
<a name="l00071"></a>00071 <span class="comment">send an 1100Hz or 1850Hz tone, and some send no tone at all. In fact, this answer</span>
<a name="l00072"></a>00072 <span class="comment">tone is so unpredictable, it cannot really be used. It should, however, always be</span>
<a name="l00073"></a>00073 <span class="comment">generated according to the specification.</span>
<a name="l00074"></a>00074 <span class="comment"></span>
<a name="l00075"></a>00075 <span class="comment">\subsection t30_page_sec_2b Common Timing Deviations</span>
<a name="l00076"></a>00076 <span class="comment"></span>
<a name="l00077"></a>00077 <span class="comment">The T.30 spec. specifies a number of time-outs. For example, after dialing a number,</span>
<a name="l00078"></a>00078 <span class="comment">a calling fax system should listen for a response for 35 seconds before giving up.</span>
<a name="l00079"></a>00079 <span class="comment">These time-out periods are as follows: </span>
<a name="l00080"></a>00080 <span class="comment"></span>
<a name="l00081"></a>00081 <span class="comment">    - T1 - 35+-5s: the maximum time for which two fax system will attempt to identify each other</span>
<a name="l00082"></a>00082 <span class="comment">    - T2 - 6+-1s:  a time-out used to start the sequence for changing transmit parameters</span>
<a name="l00083"></a>00083 <span class="comment">    - T3 - 10+-5s: a time-out used in handling operator interrupts</span>
<a name="l00084"></a>00084 <span class="comment">    - T5 - 60+-5s: a time-out used in error correction mode</span>
<a name="l00085"></a>00085 <span class="comment"></span>
<a name="l00086"></a>00086 <span class="comment">These time-outs are sometimes misinterpreted. In addition, they are routinely</span>
<a name="l00087"></a>00087 <span class="comment">ignored, sometimes with good reason. For example, after placing a call, the</span>
<a name="l00088"></a>00088 <span class="comment">calling fax system is supposed to wait for 35 seconds before giving up. If the</span>
<a name="l00089"></a>00089 <span class="comment">answering unit does not answer on the first ring or if a voice answering machine</span>
<a name="l00090"></a>00090 <span class="comment">is connected to the line, or if there are many delays through the network,</span>
<a name="l00091"></a>00091 <span class="comment">the delay before answer can be much longer than 35 seconds. </span>
<a name="l00092"></a>00092 <span class="comment"></span>
<a name="l00093"></a>00093 <span class="comment">Fax units that support error correction mode (ECM) can respond to a post-image</span>
<a name="l00094"></a>00094 <span class="comment">handshake message with a receiver not ready (RNR) message. The calling unit then</span>
<a name="l00095"></a>00095 <span class="comment">queries the receiving fax unit with a receiver ready (RR) message. If the</span>
<a name="l00096"></a>00096 <span class="comment">answering unit is still busy (printing for example), it will repeat the RNR</span>
<a name="l00097"></a>00097 <span class="comment">message. According to the T.30 standard, this sequence (RR/RNR RR/RNR) can be</span>
<a name="l00098"></a>00098 <span class="comment">repeated for up to the end of T5 (60+-5s). However, many fax systems</span>
<a name="l00099"></a>00099 <span class="comment">ignore the time-out and will continue the sequence indefinitely, unless the user</span>
<a name="l00100"></a>00100 <span class="comment">manually overrides. </span>
<a name="l00101"></a>00101 <span class="comment"></span>
<a name="l00102"></a>00102 <span class="comment">All the time-outs are subject to alteration, and sometimes misuse. Good T.30</span>
<a name="l00103"></a>00103 <span class="comment">implementations must do the right thing, and tolerate others doing the wrong thing.</span>
<a name="l00104"></a>00104 <span class="comment"></span>
<a name="l00105"></a>00105 <span class="comment">\subsection t30_page_sec_2c Variations in the inter-carrier gap</span>
<a name="l00106"></a>00106 <span class="comment"></span>
<a name="l00107"></a>00107 <span class="comment">T.30 specifies 75+-20ms of silence between signals using different modulation</span>
<a name="l00108"></a>00108 <span class="comment">schemes. Examples are between the end of a DCS signal and the start of a TCF signal,</span>
<a name="l00109"></a>00109 <span class="comment">and between the end of an image and the start of a post-image signal. Many fax systems</span>
<a name="l00110"></a>00110 <span class="comment">violate this requirement, especially for the silent period between DCS and TCF.</span>
<a name="l00111"></a>00111 <span class="comment">This may be stretched to well over 100ms. If this period is too long, it can interfere with</span>
<a name="l00112"></a>00112 <span class="comment">handshake signal error recovery, should a packet be corrupted on the line. Systems</span>
<a name="l00113"></a>00113 <span class="comment">should ensure they stay within the prescribed T.30 limits, and be tolerant of others</span>
<a name="l00114"></a>00114 <span class="comment">being out of spec.. </span>
<a name="l00115"></a>00115 <span class="comment"></span>
<a name="l00116"></a>00116 <span class="comment">\subsection t30_page_sec_2d Other timing variations</span>
<a name="l00117"></a>00117 <span class="comment"></span>
<a name="l00118"></a>00118 <span class="comment">Testing is required to determine the ability of a fax system to handle</span>
<a name="l00119"></a>00119 <span class="comment">variations in the duration of pauses between unacknowledged handshake message</span>
<a name="l00120"></a>00120 <span class="comment">repetitions, and also in the pauses between the receipt of a handshake command and</span>
<a name="l00121"></a>00121 <span class="comment">the start of a response to that command. In order to reduce the total</span>
<a name="l00122"></a>00122 <span class="comment">transmission time, many fax systems start sending a response message before the</span>
<a name="l00123"></a>00123 <span class="comment">end of the command has been received. </span>
<a name="l00124"></a>00124 <span class="comment"></span>
<a name="l00125"></a>00125 <span class="comment">\subsection t30_page_sec_2e Other deviations from the T.30 standard</span>
<a name="l00126"></a>00126 <span class="comment"></span>
<a name="l00127"></a>00127 <span class="comment">There are many other commonly encountered variations between machines, including:</span>
<a name="l00128"></a>00128 <span class="comment"></span>
<a name="l00129"></a>00129 <span class="comment">    - frame sequence deviations</span>
<a name="l00130"></a>00130 <span class="comment">    - preamble and flag sequence variations</span>
<a name="l00131"></a>00131 <span class="comment">    - improper EOM usage</span>
<a name="l00132"></a>00132 <span class="comment">    - unusual data rate fallback sequences</span>
<a name="l00133"></a>00133 <span class="comment">    - common training pattern detection algorithms</span>
<a name="l00134"></a>00134 <span class="comment">    - image transmission deviations</span>
<a name="l00135"></a>00135 <span class="comment">    - use of the talker echo protect tone</span>
<a name="l00136"></a>00136 <span class="comment">    - image padding and short lines</span>
<a name="l00137"></a>00137 <span class="comment">    - RTP/RTN handshake message usage</span>
<a name="l00138"></a>00138 <span class="comment">    - long duration lines</span>
<a name="l00139"></a>00139 <span class="comment">    - nonstandard disconnect sequences</span>
<a name="l00140"></a>00140 <span class="comment">    - DCN usage</span>
<a name="l00141"></a>00141 <span class="comment">*/</span>
<a name="l00142"></a>00142 <span class="comment"></span>
<a name="l00143"></a>00143 <span class="comment">/*! The maximum length of a DIS, DTC or DCS frame */</span>
<a name="l00144"></a><a class="code" href="t30_8h.html#56a84eb75e8df87ce1667c79cb801628">00144</a> <span class="preprocessor">#define T30_MAX_DIS_DTC_DCS_LEN     22</span>
<a name="l00145"></a>00145 <span class="preprocessor"></span><span class="comment">/*! The maximum length of the body of an ident string */</span>
<a name="l00146"></a><a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">00146</a> <span class="preprocessor">#define T30_MAX_IDENT_LEN           20</span>
<a name="l00147"></a>00147 <span class="preprocessor"></span><span class="comment">/*! The maximum length of the user string to insert in page headers */</span>
<a name="l00148"></a><a class="code" href="t30_8h.html#45f1d1b8021634669b6b961e22d57e77">00148</a> <span class="preprocessor">#define T30_MAX_PAGE_HEADER_INFO    50</span>
<a name="l00149"></a>00149 <span class="preprocessor"></span>
<a name="l00150"></a>00150 <span class="keyword">typedef</span> <span class="keyword">struct </span><a class="code" href="structt30__state__s.html">t30_state_s</a> t30_state_t;
<a name="l00151"></a>00151 <span class="comment"></span>
<a name="l00152"></a>00152 <span class="comment">/*!</span>
<a name="l00153"></a>00153 <span class="comment">    T.30 phase B callback handler. This handler can be used to process addition</span>
<a name="l00154"></a>00154 <span class="comment">    information available in some FAX calls, such as passwords. The callback handler</span>
<a name="l00155"></a>00155 <span class="comment">    can access whatever additional information might have been received, using</span>
<a name="l00156"></a>00156 <span class="comment">    t30_get_received_info().</span>
<a name="l00157"></a>00157 <span class="comment">    \brief T.30 phase B callback handler.</span>
<a name="l00158"></a>00158 <span class="comment">    \param s The T.30 context.</span>
<a name="l00159"></a>00159 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00160"></a>00160 <span class="comment">    \param result The phase B event code.</span>
<a name="l00161"></a>00161 <span class="comment">    \return The new status. Normally, T30_ERR_OK is returned.</span>
<a name="l00162"></a>00162 <span class="comment">*/</span>
<a name="l00163"></a><a class="code" href="t30_8h.html#787e75f18f96d225fc7f2daae401b6fb">00163</a> <span class="keyword">typedef</span> int (<a class="code" href="t30_8h.html#787e75f18f96d225fc7f2daae401b6fb">t30_phase_b_handler_t</a>)(t30_state_t *s, <span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> result);
<a name="l00164"></a>00164 <span class="comment"></span>
<a name="l00165"></a>00165 <span class="comment">/*!</span>
<a name="l00166"></a>00166 <span class="comment">    T.30 phase D callback handler.</span>
<a name="l00167"></a>00167 <span class="comment">    \brief T.30 phase D callback handler.</span>
<a name="l00168"></a>00168 <span class="comment">    \param s The T.30 context.</span>
<a name="l00169"></a>00169 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00170"></a>00170 <span class="comment">    \param result The phase D event code.</span>
<a name="l00171"></a>00171 <span class="comment">    \return The new status. Normally, T30_ERR_OK is returned.</span>
<a name="l00172"></a>00172 <span class="comment">*/</span>
<a name="l00173"></a><a class="code" href="t30_8h.html#b204f5730f623567092ca72d8b83e980">00173</a> <span class="keyword">typedef</span> int (<a class="code" href="t30_8h.html#b204f5730f623567092ca72d8b83e980">t30_phase_d_handler_t</a>)(t30_state_t *s, <span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> result);
<a name="l00174"></a>00174 <span class="comment"></span>
<a name="l00175"></a>00175 <span class="comment">/*!</span>
<a name="l00176"></a>00176 <span class="comment">    T.30 phase E callback handler.</span>
<a name="l00177"></a>00177 <span class="comment">    \brief T.30 phase E callback handler.</span>
<a name="l00178"></a>00178 <span class="comment">    \param s The T.30 context.</span>
<a name="l00179"></a>00179 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00180"></a>00180 <span class="comment">    \param completion_code The phase E completion code.</span>
<a name="l00181"></a>00181 <span class="comment">*/</span>
<a name="l00182"></a><a class="code" href="t30_8h.html#f20e20b9669c4fe15e2de5b48d829d65">00182</a> <span class="keyword">typedef</span> void (<a class="code" href="t30_8h.html#f20e20b9669c4fe15e2de5b48d829d65">t30_phase_e_handler_t</a>)(t30_state_t *s, <span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> completion_code);
<a name="l00183"></a>00183 <span class="comment"></span>
<a name="l00184"></a>00184 <span class="comment">/*!</span>
<a name="l00185"></a>00185 <span class="comment">    T.30 real time frame handler.</span>
<a name="l00186"></a>00186 <span class="comment">    \brief T.30 real time frame handler.</span>
<a name="l00187"></a>00187 <span class="comment">    \param s The T.30 context.</span>
<a name="l00188"></a>00188 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00189"></a>00189 <span class="comment">    \param direction TRUE for incoming, FALSE for outgoing.</span>
<a name="l00190"></a>00190 <span class="comment">    \param msg The HDLC message.</span>
<a name="l00191"></a>00191 <span class="comment">    \param len The length of the message.</span>
<a name="l00192"></a>00192 <span class="comment">*/</span>
<a name="l00193"></a><a class="code" href="t30_8h.html#52252c16c1393712514973190dd3eb62">00193</a> <span class="keyword">typedef</span> void (<a class="code" href="t30_8h.html#52252c16c1393712514973190dd3eb62">t30_real_time_frame_handler_t</a>)(t30_state_t *s,
<a name="l00194"></a>00194                                              <span class="keywordtype">void</span> *user_data,
<a name="l00195"></a>00195                                              <span class="keywordtype">int</span> direction,
<a name="l00196"></a>00196                                              <span class="keyword">const</span> uint8_t msg[],
<a name="l00197"></a>00197                                              <span class="keywordtype">int</span> len);
<a name="l00198"></a>00198 <span class="comment"></span>
<a name="l00199"></a>00199 <span class="comment">/*!</span>
<a name="l00200"></a>00200 <span class="comment">    T.30 document handler.</span>
<a name="l00201"></a>00201 <span class="comment">    \brief T.30 document handler.</span>
<a name="l00202"></a>00202 <span class="comment">    \param s The T.30 context.</span>
<a name="l00203"></a>00203 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00204"></a>00204 <span class="comment">    \param result The document event code.</span>
<a name="l00205"></a>00205 <span class="comment">*/</span>
<a name="l00206"></a><a class="code" href="t30_8h.html#5d83fc65cf596462214b76269be9c5ce">00206</a> <span class="keyword">typedef</span> int (<a class="code" href="t30_8h.html#5d83fc65cf596462214b76269be9c5ce">t30_document_handler_t</a>)(t30_state_t *s, <span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> status);
<a name="l00207"></a>00207 <span class="comment"></span>
<a name="l00208"></a>00208 <span class="comment">/*!</span>
<a name="l00209"></a>00209 <span class="comment">    T.30 set a receive or transmit type handler.</span>
<a name="l00210"></a>00210 <span class="comment">    \brief T.30 set a receive or transmit type handler.</span>
<a name="l00211"></a>00211 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00212"></a>00212 <span class="comment">    \param type The modem, tone or silence to be sent or received.</span>
<a name="l00213"></a>00213 <span class="comment">    \param bit_rate The bit rate of the modem to be sent or received.</span>
<a name="l00214"></a>00214 <span class="comment">    \param short_train TRUE if the short training sequence should be used (where one exists).</span>
<a name="l00215"></a>00215 <span class="comment">    \param use_hdlc FALSE for bit stream, TRUE for HDLC framing.</span>
<a name="l00216"></a>00216 <span class="comment">*/</span>
<a name="l00217"></a><a class="code" href="t30_8h.html#11c570723c39d784903465b4f599efe9">00217</a> <span class="keyword">typedef</span> void (<a class="code" href="t30_8h.html#11c570723c39d784903465b4f599efe9">t30_set_handler_t</a>)(<span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> type, <span class="keywordtype">int</span> bit_rate, <span class="keywordtype">int</span> <a class="code" href="structt30__state__s.html#4288a69b9906c77954b8edcc9692a1ad">short_train</a>, <span class="keywordtype">int</span> use_hdlc);
<a name="l00218"></a>00218 <span class="comment"></span>
<a name="l00219"></a>00219 <span class="comment">/*!</span>
<a name="l00220"></a>00220 <span class="comment">    T.30 send HDLC handler.</span>
<a name="l00221"></a>00221 <span class="comment">    \brief T.30 send HDLC handler.</span>
<a name="l00222"></a>00222 <span class="comment">    \param user_data An opaque pointer.</span>
<a name="l00223"></a>00223 <span class="comment">    \param msg The HDLC message.</span>
<a name="l00224"></a>00224 <span class="comment">    \param len The length of the message.</span>
<a name="l00225"></a>00225 <span class="comment">*/</span>
<a name="l00226"></a><a class="code" href="t30_8h.html#8ec77f1cb2c5a6931c48508c60c2244d">00226</a> <span class="keyword">typedef</span> void (<a class="code" href="t30_8h.html#8ec77f1cb2c5a6931c48508c60c2244d">t30_send_hdlc_handler_t</a>)(<span class="keywordtype">void</span> *user_data, <span class="keyword">const</span> uint8_t msg[], <span class="keywordtype">int</span> len);
<a name="l00227"></a>00227 <span class="comment"></span>
<a name="l00228"></a>00228 <span class="comment">/*!</span>
<a name="l00229"></a>00229 <span class="comment">    T.30 protocol completion codes, at phase E.</span>
<a name="l00230"></a>00230 <span class="comment">*/</span>
<a name="l00231"></a>00231 <span class="keyword">enum</span>
<a name="l00232"></a>00232 {
<a name="l00233"></a>00233     T30_ERR_OK = 0,             <span class="comment">/*! OK */</span>
<a name="l00234"></a>00234 
<a name="l00235"></a>00235     <span class="comment">/* Link problems */</span>
<a name="l00236"></a>00236     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6732c4d54a05d3c2f71a39d7db3c4138a1">T30_ERR_CEDTONE</a>,            <span class="comment">/*! The CED tone exceeded 5s */</span>
<a name="l00237"></a>00237     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d671b867ac1278898e3e004de0de27755a2">T30_ERR_T0_EXPIRED</a>,         <span class="comment">/*! Timed out waiting for initial communication */</span>
<a name="l00238"></a>00238     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67901a2642bb83a04e324d4aa3c0a4d9e3">T30_ERR_T1_EXPIRED</a>,         <span class="comment">/*! Timed out waiting for the first message */</span>
<a name="l00239"></a>00239     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67b41201c024df389cb3f0a3dcb388e883">T30_ERR_T3_EXPIRED</a>,         <span class="comment">/*! Timed out waiting for procedural interrupt */</span>
<a name="l00240"></a>00240     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6782887403d0805d72266707040a334cfe">T30_ERR_HDLC_CARRIER</a>,       <span class="comment">/*! The HDLC carrier did not stop in a timely manner */</span>
<a name="l00241"></a>00241     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67b223cc6a3d8886c750e1a6ba63646102">T30_ERR_CANNOT_TRAIN</a>,       <span class="comment">/*! Failed to train with any of the compatible modems */</span>
<a name="l00242"></a>00242     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67ddb2ceae89c828bf35ab551e718959f8">T30_ERR_OPER_INT_FAIL</a>,      <span class="comment">/*! Operator intervention failed */</span>
<a name="l00243"></a>00243     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d674d53716e58e0aa268f7e56024b738837">T30_ERR_INCOMPATIBLE</a>,       <span class="comment">/*! Far end is not compatible */</span>
<a name="l00244"></a>00244     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67fc23ac2290c9d0deb86731da30bab862">T30_ERR_RX_INCAPABLE</a>,       <span class="comment">/*! Far end is not able to receive */</span>
<a name="l00245"></a>00245     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67164602d15a86b5cb80487d6b0c5e2d08">T30_ERR_TX_INCAPABLE</a>,       <span class="comment">/*! Far end is not able to transmit */</span>
<a name="l00246"></a>00246     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67a3692453303c68f39006c87ce29ce985">T30_ERR_NORESSUPPORT</a>,       <span class="comment">/*! Far end cannot receive at the resolution of the image */</span>
<a name="l00247"></a>00247     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d670a1e779f496bd4fad9156572552ca0f5">T30_ERR_NOSIZESUPPORT</a>,      <span class="comment">/*! Far end cannot receive at the size of image */</span>
<a name="l00248"></a>00248     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6782092623d7d70e566586a957eece9569">T30_ERR_UNEXPECTED</a>,         <span class="comment">/*! Unexpected message received */</span>
<a name="l00249"></a>00249 
<a name="l00250"></a>00250     <span class="comment">/* Phase E status values returned to a transmitter */</span>
<a name="l00251"></a>00251     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67d27b5ef64f2467795b5b526cd582398a">T30_ERR_TX_BADDCS</a>,          <span class="comment">/*! Received bad response to DCS or training */</span>
<a name="l00252"></a>00252     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67b231977fd0aa3fa472de40e2a74d261e">T30_ERR_TX_BADPG</a>,           <span class="comment">/*! Received a DCN from remote after sending a page */</span>
<a name="l00253"></a>00253     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67eddf1ad02400f6eb7323569c02de9aee">T30_ERR_TX_ECMPHD</a>,          <span class="comment">/*! Invalid ECM response received from receiver */</span>
<a name="l00254"></a>00254     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67d69e4cdf35819c1f86ab3cf8d6c8e974">T30_ERR_TX_GOTDCN</a>,          <span class="comment">/*! Received a DCN while waiting for a DIS */</span>
<a name="l00255"></a>00255     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67ecc5608b83889b9961e242496fd0a4fc">T30_ERR_TX_INVALRSP</a>,        <span class="comment">/*! Invalid response after sending a page */</span>
<a name="l00256"></a>00256     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67a6f7d08a11934edc759758762718df04">T30_ERR_TX_NODIS</a>,           <span class="comment">/*! Received other than DIS while waiting for DIS */</span>
<a name="l00257"></a>00257     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6710f46c46d74672b70a57060a16fc3625">T30_ERR_TX_PHBDEAD</a>,         <span class="comment">/*! Received no response to DCS, training or TCF */</span>
<a name="l00258"></a>00258     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d679ab09b105652ecb98e2c59ce94c14190">T30_ERR_TX_PHDDEAD</a>,         <span class="comment">/*! No response after sending a page */</span>
<a name="l00259"></a>00259     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67552c7ad67dc6e2f001eac9b3f6cd156c">T30_ERR_TX_T5EXP</a>,           <span class="comment">/*! Timed out waiting for receiver ready (ECM mode) */</span>
<a name="l00260"></a>00260 
<a name="l00261"></a>00261     <span class="comment">/* Phase E status values returned to a receiver */</span>
<a name="l00262"></a>00262     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67d3b05c7c5d5e64a80f53c737fceecbd8">T30_ERR_RX_ECMPHD</a>,          <span class="comment">/*! Invalid ECM response received from transmitter */</span>
<a name="l00263"></a>00263     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6794985ff0337313f9d51433c564984cef">T30_ERR_RX_GOTDCS</a>,          <span class="comment">/*! DCS received while waiting for DTC */</span>
<a name="l00264"></a>00264     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67f36806c88a606cabcd01f2c70904aa3b">T30_ERR_RX_INVALCMD</a>,        <span class="comment">/*! Unexpected command after page received */</span>
<a name="l00265"></a>00265     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67cb1326b5256ffc1ec03cedf747dc1974">T30_ERR_RX_NOCARRIER</a>,       <span class="comment">/*! Carrier lost during fax receive */</span>
<a name="l00266"></a>00266     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67347c9ed0e5a5c91df887a27352511a5c">T30_ERR_RX_NOEOL</a>,           <span class="comment">/*! Timed out while waiting for EOL (end Of line) */</span>
<a name="l00267"></a>00267     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d672076c671bbf9968db5f132156c2aee89">T30_ERR_RX_NOFAX</a>,           <span class="comment">/*! Timed out while waiting for first line */</span>
<a name="l00268"></a>00268     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6706f59fef9a2ea3cf57869febde95b9b4">T30_ERR_RX_T2EXPDCN</a>,        <span class="comment">/*! Timer T2 expired while waiting for DCN */</span>
<a name="l00269"></a>00269     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67880a3162cce7768089b3e7f6a3eab4c9">T30_ERR_RX_T2EXPD</a>,          <span class="comment">/*! Timer T2 expired while waiting for phase D */</span>
<a name="l00270"></a>00270     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d679ac8bff84441fbd82d0e52a0e1ee44a9">T30_ERR_RX_T2EXPFAX</a>,        <span class="comment">/*! Timer T2 expired while waiting for fax page */</span>
<a name="l00271"></a>00271     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67ea9f398d331c9901a691b507de3e4c4e">T30_ERR_RX_T2EXPMPS</a>,        <span class="comment">/*! Timer T2 expired while waiting for next fax page */</span>
<a name="l00272"></a>00272     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67affcc6cbd6a3dc29a80849a3098fad4d">T30_ERR_RX_T2EXPRR</a>,         <span class="comment">/*! Timer T2 expired while waiting for RR command */</span>
<a name="l00273"></a>00273     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67f159c31f84649f86fb304a8faa215644">T30_ERR_RX_T2EXP</a>,           <span class="comment">/*! Timer T2 expired while waiting for NSS, DCS or MCF */</span>
<a name="l00274"></a>00274     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d679eff10fca4c38fadcc5c2be34571432a">T30_ERR_RX_DCNWHY</a>,          <span class="comment">/*! Unexpected DCN while waiting for DCS or DIS */</span>
<a name="l00275"></a>00275     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67af0957be3c76ba263d8b06fca0ddbe34">T30_ERR_RX_DCNDATA</a>,         <span class="comment">/*! Unexpected DCN while waiting for image data */</span>
<a name="l00276"></a>00276     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d677fd14be4e03acd1b61d316fafc1df8bf">T30_ERR_RX_DCNFAX</a>,          <span class="comment">/*! Unexpected DCN while waiting for EOM, EOP or MPS */</span>
<a name="l00277"></a>00277     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d675ed8363a553b55d6dd4f3f7bbd529994">T30_ERR_RX_DCNPHD</a>,          <span class="comment">/*! Unexpected DCN after EOM or MPS sequence */</span>
<a name="l00278"></a>00278     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67e5193956c720aa8bbe1c3e2c61c40478">T30_ERR_RX_DCNRRD</a>,          <span class="comment">/*! Unexpected DCN after RR/RNR sequence */</span>
<a name="l00279"></a>00279     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67416b39f649762c1bce03187eb87ba0ab">T30_ERR_RX_DCNNORTN</a>,        <span class="comment">/*! Unexpected DCN after requested retransmission */</span>
<a name="l00280"></a>00280 
<a name="l00281"></a>00281     <span class="comment">/* TIFF file problems */</span>
<a name="l00282"></a>00282     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d676dd294a568a12b7d9c701b0ae9269926">T30_ERR_FILEERROR</a>,          <span class="comment">/*! TIFF/F file cannot be opened */</span>
<a name="l00283"></a>00283     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67584ea9284cd53487eab87dcd4f2e3d89">T30_ERR_NOPAGE</a>,             <span class="comment">/*! TIFF/F page not found */</span>
<a name="l00284"></a>00284     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d676436d5e6fcbd3b1ab78b9b6941a091ec">T30_ERR_BADTIFF</a>,            <span class="comment">/*! TIFF/F format is not compatible */</span>
<a name="l00285"></a>00285     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67da2cb8dad311836ebdc2d258d3d611f2">T30_ERR_BADPAGE</a>,            <span class="comment">/*! TIFF/F page number tag missing */</span>
<a name="l00286"></a>00286     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d677bdb837dbd0ff676d993bb75e354f0df">T30_ERR_BADTAG</a>,             <span class="comment">/*! Incorrect values for TIFF/F tags */</span>
<a name="l00287"></a>00287     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d676f51d642111a7ea11baa7e5e0bc39101">T30_ERR_BADTIFFHDR</a>,         <span class="comment">/*! Bad TIFF/F header - incorrect values in fields */</span>
<a name="l00288"></a>00288     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d676e5946c27cfbfe3ad5911451db2bcd4b">T30_ERR_NOMEM</a>,              <span class="comment">/*! Cannot allocate memory for more pages */</span>
<a name="l00289"></a>00289     
<a name="l00290"></a>00290     <span class="comment">/* General problems */</span>
<a name="l00291"></a>00291     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d675aece1845096807e48521839b0c0a3e9">T30_ERR_RETRYDCN</a>,           <span class="comment">/*! Disconnected after permitted retries */</span>
<a name="l00292"></a>00292     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67c72df13304db7951b2d8adb58352acc7">T30_ERR_CALLDROPPED</a>,        <span class="comment">/*! The call dropped prematurely */</span>
<a name="l00293"></a>00293     
<a name="l00294"></a>00294     <span class="comment">/* Feature negotiation issues */</span>
<a name="l00295"></a>00295     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6735528d9f654325252df1a22bb237212f">T30_ERR_NOPOLL</a>,             <span class="comment">/*! Poll not accepted */</span>
<a name="l00296"></a>00296     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67a9ebed14d5e52b49a00616bfd7e03014">T30_ERR_IDENT_UNACCEPTABLE</a>, <span class="comment">/*! Far end's ident is not acceptable */</span>
<a name="l00297"></a>00297     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d678221505c9854bb6cdc1d4d11965ab357">T30_ERR_SUB_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's sub-address is not acceptable */</span>
<a name="l00298"></a>00298     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6748134d6940df02675b758c9cf4e25315">T30_ERR_SEP_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's selective polling address is not acceptable */</span>
<a name="l00299"></a>00299     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67f5c2b2b74c2e153260c5d6572b8e6467">T30_ERR_PSA_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's polled sub-address is not acceptable */</span>
<a name="l00300"></a>00300     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67c9631e746d0731ff2eb0aba77fd3a094">T30_ERR_SID_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's sender identification is not acceptable */</span>
<a name="l00301"></a>00301     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6738c813c466ae3d74bae3af72d757b5c3">T30_ERR_PWD_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's password is not acceptable */</span>
<a name="l00302"></a>00302     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d6777ef293cdbe624ddce7bebd9bb98a190">T30_ERR_TSA_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's transmitting subscriber internet address is not acceptable */</span>
<a name="l00303"></a>00303     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67113aa6e6fad211973144e692e52e5358">T30_ERR_IRA_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's internet routing address is not acceptable */</span>
<a name="l00304"></a>00304     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d67f7ad166be69f9f714250aa2ec163770d">T30_ERR_CIA_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's calling subscriber internet address is not acceptable */</span>
<a name="l00305"></a>00305     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d672cf11addae7aac1f722bb4ca1e002f97">T30_ERR_ISP_UNACCEPTABLE</a>,   <span class="comment">/*! Far end's internet selective polling address is not acceptable */</span>
<a name="l00306"></a>00306     <a class="code" href="t30_8h.html#9334a5b9057f32da96db9b5c6a045d672dcb9e65dda3e6bc0be666180650ab9b">T30_ERR_CSA_UNACCEPTABLE</a>    <span class="comment">/*! Far end's called subscriber internet address is not acceptable */</span>
<a name="l00307"></a>00307 };
<a name="l00308"></a>00308 <span class="comment"></span>
<a name="l00309"></a>00309 <span class="comment">/*!</span>
<a name="l00310"></a>00310 <span class="comment">    I/O modes for the T.30 protocol.</span>
<a name="l00311"></a>00311 <span class="comment">    These are allocated such that the lower 4 bits represents the variant of the modem - e.g. the</span>
<a name="l00312"></a>00312 <span class="comment">    particular bit rate selected.</span>
<a name="l00313"></a>00313 <span class="comment">*/</span>
<a name="l00314"></a>00314 <span class="keyword">enum</span>
<a name="l00315"></a>00315 {
<a name="l00316"></a>00316     T30_MODEM_NONE = 0,
<a name="l00317"></a>00317     T30_MODEM_PAUSE,
<a name="l00318"></a>00318     T30_MODEM_CED,
<a name="l00319"></a>00319     T30_MODEM_CNG,
<a name="l00320"></a>00320     T30_MODEM_V21,
<a name="l00321"></a>00321     T30_MODEM_V27TER,
<a name="l00322"></a>00322     T30_MODEM_V29,
<a name="l00323"></a>00323     T30_MODEM_V17,
<a name="l00324"></a>00324     T30_MODEM_DONE
<a name="l00325"></a>00325 };
<a name="l00326"></a>00326 
<a name="l00327"></a>00327 <span class="keyword">enum</span>
<a name="l00328"></a>00328 {
<a name="l00329"></a>00329     T30_FRONT_END_SEND_STEP_COMPLETE = 0,<span class="comment"></span>
<a name="l00330"></a>00330 <span class="comment">    /*! The current receive has completed. This is only needed to report an</span>
<a name="l00331"></a>00331 <span class="comment">        unexpected end of the receive operation, as might happen with T.38</span>
<a name="l00332"></a>00332 <span class="comment">        dying. */</span>
<a name="l00333"></a>00333     <a class="code" href="t30_8h.html#de9ca5088d171ad20b4c237f1c2d6260d67f2fafeafdf3f225f9ade627c0c393">T30_FRONT_END_RECEIVE_COMPLETE</a>,
<a name="l00334"></a>00334     T30_FRONT_END_SIGNAL_PRESENT,
<a name="l00335"></a>00335     T30_FRONT_END_SIGNAL_ABSENT,
<a name="l00336"></a>00336     T30_FRONT_END_CED_PRESENT,
<a name="l00337"></a>00337     T30_FRONT_END_CNG_PRESENT
<a name="l00338"></a>00338 };
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 <span class="keyword">enum</span>
<a name="l00341"></a>00341 {<span class="comment"></span>
<a name="l00342"></a>00342 <span class="comment">    /*! Support the V.27ter modem (2400, and 4800bps) for image transfer. */</span>
<a name="l00343"></a>00343     <a class="code" href="t30_8h.html#9e93d8eae633734dfeb29e24a1f3a7c0b05b68f10467406fd4b03ca926716fac">T30_SUPPORT_V27TER</a> = 0x01,<span class="comment"></span>
<a name="l00344"></a>00344 <span class="comment">    /*! Support the V.29 modem (9600, and 7200bps) for image transfer. */</span>
<a name="l00345"></a>00345     <a class="code" href="t30_8h.html#9e93d8eae633734dfeb29e24a1f3a7c0fb37d4e0cc53422982dd12ccbac6a659">T30_SUPPORT_V29</a> = 0x02,<span class="comment"></span>
<a name="l00346"></a>00346 <span class="comment">    /*! Support the V.17 modem (14400, 12000, 9600 and 7200bps) for image transfer. */</span>
<a name="l00347"></a>00347     <a class="code" href="t30_8h.html#9e93d8eae633734dfeb29e24a1f3a7c0f232ec2b0b3212af92e2c8079725a1fd">T30_SUPPORT_V17</a> = 0x04,<span class="comment"></span>
<a name="l00348"></a>00348 <span class="comment">    /*! Support the V.34 modem (up to 33,600bps) for image transfer. */</span>
<a name="l00349"></a>00349     <a class="code" href="t30_8h.html#9e93d8eae633734dfeb29e24a1f3a7c07b10b0047422de01e4d83497b8a5bf72">T30_SUPPORT_V34</a> = 0x08,<span class="comment"></span>
<a name="l00350"></a>00350 <span class="comment">    /*! Support the Internet aware FAX mode (no bit rate limit) for image transfer. */</span>
<a name="l00351"></a>00351     <a class="code" href="t30_8h.html#9e93d8eae633734dfeb29e24a1f3a7c07b4b0a2f4e185fcc9977dbb7f674d9d0">T30_SUPPORT_IAF</a> = 0x10
<a name="l00352"></a>00352 };
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 <span class="keyword">enum</span>
<a name="l00355"></a>00355 {<span class="comment"></span>
<a name="l00356"></a>00356 <span class="comment">    /*! No compression */</span>
<a name="l00357"></a>00357     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6ff48a8a3cc88cbcb7839c794ee89f03a">T30_SUPPORT_NO_COMPRESSION</a> = 0x01,<span class="comment"></span>
<a name="l00358"></a>00358 <span class="comment">    /*! T.1 1D compression */</span>
<a name="l00359"></a>00359     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d617bf53499408a38508e1ec02502c28eb">T30_SUPPORT_T4_1D_COMPRESSION</a> = 0x02,<span class="comment"></span>
<a name="l00360"></a>00360 <span class="comment">    /*! T.4 2D compression */</span>
<a name="l00361"></a>00361     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d63e1cfac81451aa9d6555d873e20be15b">T30_SUPPORT_T4_2D_COMPRESSION</a> = 0x04,<span class="comment"></span>
<a name="l00362"></a>00362 <span class="comment">    /*! T.6 2D compression */</span>
<a name="l00363"></a>00363     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6a596f87e26a9be879da1b5c9f0ee57f8">T30_SUPPORT_T6_COMPRESSION</a> = 0x08,<span class="comment"></span>
<a name="l00364"></a>00364 <span class="comment">    /*! T.85 monochrome JBIG compression */</span>
<a name="l00365"></a>00365     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6b4aae3b4af90f9695132eb2aff44c240">T30_SUPPORT_T85_COMPRESSION</a> = 0x10,<span class="comment"></span>
<a name="l00366"></a>00366 <span class="comment">    /*! T.43 colour JBIG compression */</span>
<a name="l00367"></a>00367     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6ed9a80da6238b30d6f60498824c0db6e">T30_SUPPORT_T43_COMPRESSION</a> = 0x20,<span class="comment"></span>
<a name="l00368"></a>00368 <span class="comment">    /*! T.45 run length colour compression */</span>
<a name="l00369"></a>00369     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d670d479079e1c504e937d9eb3b204ea76">T30_SUPPORT_T45_COMPRESSION</a> = 0x40,<span class="comment"></span>
<a name="l00370"></a>00370 <span class="comment">    /*! T.81 + T.30 Annex E colour JPEG compression */</span>
<a name="l00371"></a>00371     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6a77f8e9b8ed21dfe6ee145f1c924ea4d">T30_SUPPORT_T81_COMPRESSION</a> = 0x80,<span class="comment"></span>
<a name="l00372"></a>00372 <span class="comment">    /*! T.81 + T.30 Annex K colour sYCC-JPEG compression */</span>
<a name="l00373"></a>00373     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6d7289c4328ba6d349f10e94419b0e59c">T30_SUPPORT_SYCC_T81_COMPRESSION</a> = 0x100,<span class="comment"></span>
<a name="l00374"></a>00374 <span class="comment">    /*! T.88 monochrome JBIG2 compression */</span>
<a name="l00375"></a>00375     <a class="code" href="t30_8h.html#eb8e1c282570d629a6b603a94a4650d6d31e980325d44d2cea6029920beb891a">T30_SUPPORT_T88_COMPRESSION</a> = 0x200
<a name="l00376"></a>00376 };
<a name="l00377"></a>00377 
<a name="l00378"></a>00378 <span class="keyword">enum</span>
<a name="l00379"></a>00379 {<span class="comment"></span>
<a name="l00380"></a>00380 <span class="comment">    /*! Support standard FAX Y-resolution 98/100dpi */</span>
<a name="l00381"></a>00381     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb91e483db6f25e4e30837ed7af68fbdbd">T30_SUPPORT_STANDARD_RESOLUTION</a> = 0x01,<span class="comment"></span>
<a name="l00382"></a>00382 <span class="comment">    /*! Support fine FAX Y-resolution 196/200dpi */</span>
<a name="l00383"></a>00383     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbbaa8c489ee6697ad76d5af86d6225cf82">T30_SUPPORT_FINE_RESOLUTION</a> = 0x02,<span class="comment"></span>
<a name="l00384"></a>00384 <span class="comment">    /*! Support super-fine FAX Y-resolution 392/400dpi */</span>
<a name="l00385"></a>00385     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb2efc54a8140afaee2fc6080af1a1755f">T30_SUPPORT_SUPERFINE_RESOLUTION</a> = 0x04,
<a name="l00386"></a>00386 <span class="comment"></span>
<a name="l00387"></a>00387 <span class="comment">    /*! Support half FAX X-resolution 100/102dpi */</span>
<a name="l00388"></a>00388     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbbe955fbd171bb31efa990d59060dc5429">T30_SUPPORT_R4_RESOLUTION</a> = 0x10000,<span class="comment"></span>
<a name="l00389"></a>00389 <span class="comment">    /*! Support standard FAX X-resolution 200/204dpi */</span>
<a name="l00390"></a>00390     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb5481b47c8469efd1498145344fd11ca2">T30_SUPPORT_R8_RESOLUTION</a> = 0x20000,<span class="comment"></span>
<a name="l00391"></a>00391 <span class="comment">    /*! Support double FAX X-resolution 400dpi */</span>
<a name="l00392"></a>00392     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb54cec5f47b277fec7436eef4c5912377">T30_SUPPORT_R16_RESOLUTION</a> = 0x40000,
<a name="l00393"></a>00393 <span class="comment"></span>
<a name="l00394"></a>00394 <span class="comment">    /*! Support 300dpi x 300 dpi */</span>
<a name="l00395"></a>00395     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb5206d727bb9c06a61c13964dccb9e4a9">T30_SUPPORT_300_300_RESOLUTION</a> = 0x100000,<span class="comment"></span>
<a name="l00396"></a>00396 <span class="comment">    /*! Support 400dpi x 400 dpi */</span>
<a name="l00397"></a>00397     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb2488242b564a98c374a86594a43b39b5">T30_SUPPORT_400_400_RESOLUTION</a> = 0x200000,<span class="comment"></span>
<a name="l00398"></a>00398 <span class="comment">    /*! Support 600dpi x 600 dpi */</span>
<a name="l00399"></a>00399     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb0de280fab149b036ad79ae6610d073e5">T30_SUPPORT_600_600_RESOLUTION</a> = 0x400000,<span class="comment"></span>
<a name="l00400"></a>00400 <span class="comment">    /*! Support 1200dpi x 1200 dpi */</span>
<a name="l00401"></a>00401     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb4bd42ac78a2e5683b18bc08f2899a003">T30_SUPPORT_1200_1200_RESOLUTION</a> = 0x800000,<span class="comment"></span>
<a name="l00402"></a>00402 <span class="comment">    /*! Support 300dpi x 600 dpi */</span>
<a name="l00403"></a>00403     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb23a65e566c8e142e83948bc855646ec2">T30_SUPPORT_300_600_RESOLUTION</a> = 0x1000000,<span class="comment"></span>
<a name="l00404"></a>00404 <span class="comment">    /*! Support 400dpi x 800 dpi */</span>
<a name="l00405"></a>00405     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb0f30dbe7039e4c2b1af3a27e3a80e220">T30_SUPPORT_400_800_RESOLUTION</a> = 0x2000000,<span class="comment"></span>
<a name="l00406"></a>00406 <span class="comment">    /*! Support 600dpi x 1200 dpi */</span>
<a name="l00407"></a>00407     <a class="code" href="t30_8h.html#109bfaad92bd6d348dab484aec11edbb5d0d6f9a5f10c3f9c0da48b22b2932c6">T30_SUPPORT_600_1200_RESOLUTION</a> = 0x4000000
<a name="l00408"></a>00408 };
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 <span class="keyword">enum</span>
<a name="l00411"></a>00411 {
<a name="l00412"></a>00412     T30_SUPPORT_215MM_WIDTH = 0x01,
<a name="l00413"></a>00413     T30_SUPPORT_255MM_WIDTH = 0x02,
<a name="l00414"></a>00414     T30_SUPPORT_303MM_WIDTH = 0x04,
<a name="l00415"></a>00415 
<a name="l00416"></a>00416     T30_SUPPORT_UNLIMITED_LENGTH = 0x10000,
<a name="l00417"></a>00417     T30_SUPPORT_A4_LENGTH = 0x20000,
<a name="l00418"></a>00418     T30_SUPPORT_B4_LENGTH = 0x40000,
<a name="l00419"></a>00419     T30_SUPPORT_US_LETTER_LENGTH = 0x80000,
<a name="l00420"></a>00420     T30_SUPPORT_US_LEGAL_LENGTH = 0x100000
<a name="l00421"></a>00421 };
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 <span class="keyword">enum</span>
<a name="l00424"></a>00424 {<span class="comment"></span>
<a name="l00425"></a>00425 <span class="comment">    /*! Enable support of identification, through the SID and/or PWD frames. */</span>
<a name="l00426"></a>00426     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce76288364a835a486a1a94e2c8583a5cf">T30_SUPPORT_IDENTIFICATION</a> = 0x01,<span class="comment"></span>
<a name="l00427"></a>00427 <span class="comment">    /*! Enable support of selective polling, through the SEP frame. */</span>
<a name="l00428"></a>00428     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce84ae37d4fd703ab4aece5d2d8d11a7f1">T30_SUPPORT_SELECTIVE_POLLING</a> = 0x02,<span class="comment"></span>
<a name="l00429"></a>00429 <span class="comment">    /*! Enable support of polling sub-addressing, through the PSA frame. */</span>
<a name="l00430"></a>00430     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce19d28080055939a0b13a2bfa1ce74acc">T30_SUPPORT_POLLED_SUB_ADDRESSING</a> = 0x04,<span class="comment"></span>
<a name="l00431"></a>00431 <span class="comment">    /*! Enable support of multiple selective polling, through repeated used of the SEP and PSA frames. */</span>
<a name="l00432"></a>00432     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce5b4cd54f4ee61bcfce25594328ab9032">T30_SUPPORT_MULTIPLE_SELECTIVE_POLLING</a> = 0x08,<span class="comment"></span>
<a name="l00433"></a>00433 <span class="comment">    /*! Enable support of sub-addressing, through the SUB frame. */</span>
<a name="l00434"></a>00434     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8cea194850e83bf7b493ab18d16aa2ab93e">T30_SUPPORT_SUB_ADDRESSING</a> = 0x10,<span class="comment"></span>
<a name="l00435"></a>00435 <span class="comment">    /*! Enable support of transmitting subscriber internet address, through the TSA frame. */</span>
<a name="l00436"></a>00436     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce6494ee6d596c51341ae6b41f542afd39">T30_SUPPORT_TRANSMITTING_SUBSCRIBER_INTERNET_ADDRESS</a> = 0x20,<span class="comment"></span>
<a name="l00437"></a>00437 <span class="comment">    /*! Enable support of internet routing address, through the IRA frame. */</span>
<a name="l00438"></a>00438     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce29059c70c85ec7fc38f5be511bdb383d">T30_SUPPORT_INTERNET_ROUTING_ADDRESS</a> = 0x40,<span class="comment"></span>
<a name="l00439"></a>00439 <span class="comment">    /*! Enable support of calling subscriber internet address, through the CIA frame. */</span>
<a name="l00440"></a>00440     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce7d0c5817b42419eb419c020ac33e4f5a">T30_SUPPORT_CALLING_SUBSCRIBER_INTERNET_ADDRESS</a> = 0x80,<span class="comment"></span>
<a name="l00441"></a>00441 <span class="comment">    /*! Enable support of internet selective polling address, through the ISP frame. */</span>
<a name="l00442"></a>00442     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8cefbee979b617cbbe92ca125ec0e6bc4ec">T30_SUPPORT_INTERNET_SELECTIVE_POLLING_ADDRESS</a> = 0x100,<span class="comment"></span>
<a name="l00443"></a>00443 <span class="comment">    /*! Enable support of called subscriber internet address, through the CSA frame. */</span>
<a name="l00444"></a>00444     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8cefb3856761f7f6f4938f15cd994194ed5">T30_SUPPORT_CALLED_SUBSCRIBER_INTERNET_ADDRESS</a> = 0x200,<span class="comment"></span>
<a name="l00445"></a>00445 <span class="comment">    /*! Enable support of the field not valid (FNV) frame. */</span>
<a name="l00446"></a>00446     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8cec9ea2f4b5e0289c31c274e0ab7f73343">T30_SUPPORT_FIELD_NOT_VALID</a> = 0x400,<span class="comment"></span>
<a name="l00447"></a>00447 <span class="comment">    /*! Enable support of the command repeat (CRP) frame. */</span>
<a name="l00448"></a>00448     <a class="code" href="t30_8h.html#83e8bc15645f9d99ab91a152bb3dc8ce84209c9362c1b4e5191ad281f4f73590">T30_SUPPORT_COMMAND_REPEAT</a> = 0x800
<a name="l00449"></a>00449 };
<a name="l00450"></a>00450 
<a name="l00451"></a>00451 <span class="keyword">enum</span>
<a name="l00452"></a>00452 {
<a name="l00453"></a>00453     T30_IAF_MODE_T37 = 0x01,
<a name="l00454"></a>00454     T30_IAF_MODE_T38 = 0x02,
<a name="l00455"></a>00455     T30_IAF_MODE_FLOW_CONTROL = 0x04,<span class="comment"></span>
<a name="l00456"></a>00456 <span class="comment">    /*! Continuous flow mode means data is sent as fast as possible, usually across</span>
<a name="l00457"></a>00457 <span class="comment">        the Internet, where speed is not constrained by a PSTN modem. */</span>
<a name="l00458"></a>00458     <a class="code" href="t30_8h.html#68c01102755fc7d1c810bb0b0635fa908e58ec034de45b90f365117dc14b7126">T30_IAF_MODE_CONTINUOUS_FLOW</a> = 0x08,<span class="comment"></span>
<a name="l00459"></a>00459 <span class="comment">    /*! No TCF means TCF is not exchanged. The end points must sort out usable speed</span>
<a name="l00460"></a>00460 <span class="comment">        issues locally. */</span>
<a name="l00461"></a>00461     <a class="code" href="t30_8h.html#68c01102755fc7d1c810bb0b0635fa90e11ff8c55bbe6b75cadbcd803cabcf22">T30_IAF_MODE_NO_TCF</a> = 0x10,<span class="comment"></span>
<a name="l00462"></a>00462 <span class="comment">    /*! No fill bits means do not insert fill bits, even if the T.30 messages request</span>
<a name="l00463"></a>00463 <span class="comment">        them. */</span>
<a name="l00464"></a>00464     <a class="code" href="t30_8h.html#68c01102755fc7d1c810bb0b0635fa904cdc8abc7c42fe4d2ef3d08eeb7e1eb0">T30_IAF_MODE_NO_FILL_BITS</a> = 0x20,<span class="comment"></span>
<a name="l00465"></a>00465 <span class="comment">    /*! No indicators means do not send indicator messages when using T.38. */</span>
<a name="l00466"></a>00466     <a class="code" href="t30_8h.html#68c01102755fc7d1c810bb0b0635fa9052bd30715a118bf8ebcf3c4bbce83109">T30_IAF_MODE_NO_INDICATORS</a> = 0x40,<span class="comment"></span>
<a name="l00467"></a>00467 <span class="comment">    /*! Use relaxed timers for T.38. This is appropriate when using TCP/TPKT for T.38,</span>
<a name="l00468"></a>00468 <span class="comment">        as there is no point in anything but a long backstop timeout in such a mode. */</span>
<a name="l00469"></a>00469     <a class="code" href="t30_8h.html#68c01102755fc7d1c810bb0b0635fa909f47487a2660b509ec531475626c0641">T30_IAF_MODE_RELAXED_TIMERS</a> = 0x80
<a name="l00470"></a>00470 };
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00473"></a>00473 <span class="keyword"></span>{<span class="comment"></span>
<a name="l00474"></a>00474 <span class="comment">    /*! \brief The identifier string (CSI, TSI, CIG). */</span>
<a name="l00475"></a>00475     <span class="keywordtype">char</span> ident[<a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">T30_MAX_IDENT_LEN</a> + 1];<span class="comment"></span>
<a name="l00476"></a>00476 <span class="comment">    /*! \brief The sub-address string (SUB). */</span>
<a name="l00477"></a>00477     <span class="keywordtype">char</span> sub_address[<a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">T30_MAX_IDENT_LEN</a> + 1];<span class="comment"></span>
<a name="l00478"></a>00478 <span class="comment">    /*! \brief The selective polling sub-address (SEP). */</span>
<a name="l00479"></a>00479     <span class="keywordtype">char</span> selective_polling_address[<a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">T30_MAX_IDENT_LEN</a> + 1];<span class="comment"></span>
<a name="l00480"></a>00480 <span class="comment">    /*! \brief The polled sub-address (PSA). */</span>
<a name="l00481"></a>00481     <span class="keywordtype">char</span> polled_sub_address[<a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">T30_MAX_IDENT_LEN</a> + 1];<span class="comment"></span>
<a name="l00482"></a>00482 <span class="comment">    /*! \brief The sender identification (SID). */</span>
<a name="l00483"></a>00483     <span class="keywordtype">char</span> sender_ident[<a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">T30_MAX_IDENT_LEN</a> + 1];<span class="comment"></span>
<a name="l00484"></a>00484 <span class="comment">    /*! \brief The password (PWD). */</span>
<a name="l00485"></a>00485     <span class="keywordtype">char</span> password[<a class="code" href="t30_8h.html#4ceaf01ea6b0739931c5d6294f467c12">T30_MAX_IDENT_LEN</a> + 1];<span class="comment"></span>
<a name="l00486"></a>00486 <span class="comment">    /*! \brief Non-standard facilities (NSF). */</span>
<a name="l00487"></a>00487     uint8_t *nsf;
<a name="l00488"></a>00488     size_t nsf_len;<span class="comment"></span>
<a name="l00489"></a>00489 <span class="comment">    /*! \brief Non-standard facilities command (NSC). */</span>
<a name="l00490"></a>00490     uint8_t *nsc;
<a name="l00491"></a>00491     size_t nsc_len;<span class="comment"></span>
<a name="l00492"></a>00492 <span class="comment">    /*! \brief Non-standard facilities set-up (NSS). */</span>
<a name="l00493"></a>00493     uint8_t *nss;
<a name="l00494"></a>00494     size_t nss_len;<span class="comment"></span>
<a name="l00495"></a>00495 <span class="comment">    /*! \brief Transmitting subscriber internet address (TSA). */</span>
<a name="l00496"></a>00496     <span class="keywordtype">int</span> tsa_type;
<a name="l00497"></a>00497     <span class="keywordtype">char</span> *tsa;
<a name="l00498"></a>00498     size_t tsa_len;<span class="comment"></span>
<a name="l00499"></a>00499 <span class="comment">    /*! \brief Internet routing address (IRA). */</span>
<a name="l00500"></a>00500     <span class="keywordtype">int</span> ira_type;
<a name="l00501"></a>00501     <span class="keywordtype">char</span> *ira;
<a name="l00502"></a>00502     size_t ira_len;<span class="comment"></span>
<a name="l00503"></a>00503 <span class="comment">    /*! \brief Calling subscriber internet address (CIA). */</span>
<a name="l00504"></a>00504     <span class="keywordtype">int</span> cia_type;
<a name="l00505"></a>00505     <span class="keywordtype">char</span> *cia;
<a name="l00506"></a>00506     size_t cia_len;<span class="comment"></span>
<a name="l00507"></a>00507 <span class="comment">    /*! \brief Internet selective polling address (ISP). */</span>
<a name="l00508"></a>00508     <span class="keywordtype">int</span> isp_type;
<a name="l00509"></a>00509     <span class="keywordtype">char</span> *isp;
<a name="l00510"></a>00510     size_t isp_len;<span class="comment"></span>
<a name="l00511"></a>00511 <span class="comment">    /*! \brief Called subscriber internet address (CSA). */</span>
<a name="l00512"></a>00512     <span class="keywordtype">int</span> csa_type;
<a name="l00513"></a>00513     <span class="keywordtype">char</span> *csa;
<a name="l00514"></a>00514     size_t csa_len;
<a name="l00515"></a>00515 } t30_exchanged_info_t;
<a name="l00516"></a>00516 
<a name="l00517"></a>00517 <span class="keyword">typedef</span> <span class="keyword">struct</span>
<a name="l00518"></a>00518 <span class="keyword"></span>{<span class="comment"></span>
<a name="l00519"></a>00519 <span class="comment">    /*! \brief The current bit rate for image transfer. */</span>
<a name="l00520"></a>00520     <span class="keywordtype">int</span> bit_rate;<span class="comment"></span>
<a name="l00521"></a>00521 <span class="comment">    /*! \brief TRUE if error correcting mode is used. */</span>
<a name="l00522"></a>00522     <span class="keywordtype">int</span> error_correcting_mode;<span class="comment"></span>
<a name="l00523"></a>00523 <span class="comment">    /*! \brief The number of pages sent so far. */</span>
<a name="l00524"></a>00524     <span class="keywordtype">int</span> pages_tx;<span class="comment"></span>
<a name="l00525"></a>00525 <span class="comment">    /*! \brief The number of pages received so far. */</span>
<a name="l00526"></a>00526     <span class="keywordtype">int</span> pages_rx;<span class="comment"></span>
<a name="l00527"></a>00527 <span class="comment">    /*! \brief The number of pages in the file (&lt;0 if not known). */</span>
<a name="l00528"></a>00528     <span class="keywordtype">int</span> pages_in_file;<span class="comment"></span>
<a name="l00529"></a>00529 <span class="comment">    /*! \brief The horizontal column-to-column resolution of the most recent page, in pixels per metre */</span>
<a name="l00530"></a>00530     <span class="keywordtype">int</span> x_resolution;<span class="comment"></span>
<a name="l00531"></a>00531 <span class="comment">    /*! \brief The vertical row-to-row resolution of the most recent page, in pixels per metre */</span>
<a name="l00532"></a>00532     <span class="keywordtype">int</span> y_resolution;<span class="comment"></span>
<a name="l00533"></a>00533 <span class="comment">    /*! \brief The number of horizontal pixels in the most recent page. */</span>
<a name="l00534"></a>00534     <span class="keywordtype">int</span> width;<span class="comment"></span>
<a name="l00535"></a>00535 <span class="comment">    /*! \brief The number of vertical pixels in the most recent page. */</span>
<a name="l00536"></a>00536     <span class="keywordtype">int</span> length;<span class="comment"></span>
<a name="l00537"></a>00537 <span class="comment">    /*! \brief The size of the image, in bytes */</span>
<a name="l00538"></a>00538     <span class="keywordtype">int</span> image_size;<span class="comment"></span>
<a name="l00539"></a>00539 <span class="comment">    /*! \brief The type of compression used between the FAX machines */</span>
<a name="l00540"></a>00540     <span class="keywordtype">int</span> encoding;<span class="comment"></span>
<a name="l00541"></a>00541 <span class="comment">    /*! \brief The number of bad pixel rows in the most recent page. */</span>
<a name="l00542"></a>00542     <span class="keywordtype">int</span> bad_rows;<span class="comment"></span>
<a name="l00543"></a>00543 <span class="comment">    /*! \brief The largest number of bad pixel rows in a block in the most recent page. */</span>
<a name="l00544"></a>00544     <span class="keywordtype">int</span> longest_bad_row_run;<span class="comment"></span>
<a name="l00545"></a>00545 <span class="comment">    /*! \brief The number of HDLC frame retries, if error correcting mode is used. */</span>
<a name="l00546"></a>00546     <span class="keywordtype">int</span> error_correcting_mode_retries;<span class="comment"></span>
<a name="l00547"></a>00547 <span class="comment">    /*! \brief Current status */</span>
<a name="l00548"></a>00548     <span class="keywordtype">int</span> current_status;
<a name="l00549"></a>00549 } t30_stats_t;
<a name="l00550"></a>00550 
<a name="l00551"></a>00551 <span class="preprocessor">#if defined(__cplusplus)</span>
<a name="l00552"></a>00552 <span class="preprocessor"></span><span class="keyword">extern</span> <span class="stringliteral">"C"</span>
<a name="l00553"></a>00553 {
<a name="l00554"></a>00554 <span class="preprocessor">#endif</span>
<a name="l00555"></a>00555 <span class="preprocessor"></span><span class="comment"></span>
<a name="l00556"></a>00556 <span class="comment">/*! Initialise a T.30 context.</span>
<a name="l00557"></a>00557 <span class="comment">    \brief Initialise a T.30 context.</span>
<a name="l00558"></a>00558 <span class="comment">    \param s The T.30 context.</span>
<a name="l00559"></a>00559 <span class="comment">    \param calling_party TRUE if the context is for a calling party. FALSE if the</span>
<a name="l00560"></a>00560 <span class="comment">           context is for an answering party.</span>
<a name="l00561"></a>00561 <span class="comment">    \param set_rx_type_handler</span>
<a name="l00562"></a>00562 <span class="comment">    \param set_rx_type_user_data</span>
<a name="l00563"></a>00563 <span class="comment">    \param set_tx_type_handler</span>
<a name="l00564"></a>00564 <span class="comment">    \param set_tx_type_user_data</span>
<a name="l00565"></a>00565 <span class="comment">    \param send_hdlc_handler</span>
<a name="l00566"></a>00566 <span class="comment">    \param send_hdlc_user_data</span>
<a name="l00567"></a>00567 <span class="comment">    \return A pointer to the context, or NULL if there was a problem. */</span>
<a name="l00568"></a>00568 SPAN_DECLARE(t30_state_t *) <a class="code" href="t30_8h.html#20d4e03536a3433a3c04819db80d580a">t30_init</a>(t30_state_t *s,
<a name="l00569"></a>00569                                      <span class="keywordtype">int</span> calling_party,
<a name="l00570"></a>00570                                      <a class="code" href="t30_8h.html#11c570723c39d784903465b4f599efe9">t30_set_handler_t</a> *set_rx_type_handler,
<a name="l00571"></a>00571                                      <span class="keywordtype">void</span> *set_rx_type_user_data,
<a name="l00572"></a>00572                                      <a class="code" href="t30_8h.html#11c570723c39d784903465b4f599efe9">t30_set_handler_t</a> *set_tx_type_handler,
<a name="l00573"></a>00573                                      <span class="keywordtype">void</span> *set_tx_type_user_data,
<a name="l00574"></a>00574                                      <a class="code" href="t30_8h.html#8ec77f1cb2c5a6931c48508c60c2244d">t30_send_hdlc_handler_t</a> *send_hdlc_handler,
<a name="l00575"></a>00575                                      <span class="keywordtype">void</span> *send_hdlc_user_data);
<a name="l00576"></a>00576 <span class="comment"></span>
<a name="l00577"></a>00577 <span class="comment">/*! Release a T.30 context.</span>
<a name="l00578"></a>00578 <span class="comment">    \brief Release a T.30 context.</span>
<a name="l00579"></a>00579 <span class="comment">    \param s The T.30 context.</span>
<a name="l00580"></a>00580 <span class="comment">    \return 0 for OK, else -1. */</span>
<a name="l00581"></a>00581 SPAN_DECLARE(<span class="keywordtype">int</span>) <a class="code" href="t30_8h.html#15d19ece868a96a1051a1851bb1d713d">t30_release</a>(t30_state_t *s);
<a name="l00582"></a>00582 <span class="comment"></span>
<a name="l00583"></a>00583 <span class="comment">/*! Free a T.30 context.</span>
<a name="l00584"></a>00584 <span class="comment">    \brief Free a T.30 context.</span>
<a name="l00585"></a>00585 <span class="comment">    \param s The T.30 context.</span>
<a name="l00586"></a>00586 <span class="comment">    \return 0 for OK, else -1. */</span>
<a name="l00587"></a>00587 SPAN_DECLARE(<span class="keywordtype">int</span>) <a class="code" href="t30_8h.html#af164b4261dd531f0e7fbb8927a04f28">t30_free</a>(t30_state_t *s);
<a name="l00588"></a>00588 <span class="comment"></span>
<a name="l00589"></a>00589 <span class="comment">/*! Restart a T.30 context.</span>
<a name="l00590"></a>00590 <span class="comment">    \brief Restart a T.30 context.</span>
<a name="l00591"></a>00591 <span class="comment">    \param s The T.30 context.</span>
<a name="l00592"></a>00592 <span class="comment">    \return 0 for OK, else -1. */</span>
<a name="l00593"></a>00593 SPAN_DECLARE(<span class="keywordtype">int</span>) <a class="code" href="t30_8h.html#db7f637f31bd04cf8000302dfe6c754e">t30_restart</a>(t30_state_t *s);
<a name="l00594"></a>00594 <span class="comment"></span>
<a name="l00595"></a>00595 <span class="comment">/*! Check if a T.30 call is still active. This may be used to regularly poll</span>
<a name="l00596"></a>00596 <span class="comment">    if the job has finished.</span>
<a name="l00597"></a>00597 <span class="comment">    \brief Check if a T.30 call is still active.</span>
<a name="l00598"></a>00598 <span class="comment">    \param s The T.30 context.</span>
<a name="l00599"></a>00599 <span class="comment">    \return TRUE for call still active, or FALSE for call completed. */</span>
<a name="l00600"></a>00600 SPAN_DECLARE(<span class="keywordtype">int</span>) <a class="code" href="t30_8h.html#2836d83e821683a1e90c4562b773d0bf">t30_call_active</a>(t30_state_t *s);
<a name="l00601"></a>00601 <span class="comment"></span>
<a name="l00602"></a>00602 <span class="comment">/*! Cleanup a T.30 context if the call terminates.</span>
<a name="l00603"></a>00603 <span class="comment">    \brief Cleanup a T.30 context if the call terminates.</span>
<a name="l00604"></a>00604 <span class="comment">    \param s The T.30 context. */</span>
<a name="l00605"></a>00605 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#06042a7cc3c8a2ea45714336bf43408e">t30_terminate</a>(t30_state_t *s);
<a name="l00606"></a>00606 <span class="comment"></span>
<a name="l00607"></a>00607 <span class="comment">/*! Inform the T.30 engine of a status change in the front end (end of tx, rx signal change, etc.).</span>
<a name="l00608"></a>00608 <span class="comment">    \brief Inform the T.30 engine of a status change in the front end (end of tx, rx signal change, etc.).</span>
<a name="l00609"></a>00609 <span class="comment">    \param user_data The T.30 context.</span>
<a name="l00610"></a>00610 <span class="comment">    \param status The type of status change which occured. */</span>
<a name="l00611"></a>00611 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#19bf0d4c972f8916999e9bcd852a7b54">t30_front_end_status</a>(<span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> status);
<a name="l00612"></a>00612 <span class="comment"></span>
<a name="l00613"></a>00613 <span class="comment">/*! Get a bit of received non-ECM image data.</span>
<a name="l00614"></a>00614 <span class="comment">    \brief Get a bit of received non-ECM image data.</span>
<a name="l00615"></a>00615 <span class="comment">    \param user_data An opaque pointer, which must point to the T.30 context.</span>
<a name="l00616"></a>00616 <span class="comment">    \return The next bit to transmit. */</span>
<a name="l00617"></a>00617 <a class="code" href="async_8h.html#e4a9785b72733643953caf7212ed5d78">SPAN_DECLARE_NONSTD</a>(<span class="keywordtype">int</span>) t30_non_ecm_get_bit(<span class="keywordtype">void</span> *user_data);
<a name="l00618"></a>00618 <span class="comment"></span>
<a name="l00619"></a>00619 <span class="comment">/*! Get a byte of received non-ECM image data.</span>
<a name="l00620"></a>00620 <span class="comment">    \brief Get a byte of received non-ECM image data.</span>
<a name="l00621"></a>00621 <span class="comment">    \param user_data An opaque pointer, which must point to the T.30 context.</span>
<a name="l00622"></a>00622 <span class="comment">    \return The next byte to transmit. */</span>
<a name="l00623"></a>00623 SPAN_DECLARE(<span class="keywordtype">int</span>) <a class="code" href="t30_8h.html#18248b7c4761455e8c0427d2c57221f1">t30_non_ecm_get_byte</a>(<span class="keywordtype">void</span> *user_data);
<a name="l00624"></a>00624 <span class="comment"></span>
<a name="l00625"></a>00625 <span class="comment">/*! Get a chunk of received non-ECM image data.</span>
<a name="l00626"></a>00626 <span class="comment">    \brief Get a bit of received non-ECM image data.</span>
<a name="l00627"></a>00627 <span class="comment">    \param user_data An opaque pointer, which must point to the T.30 context.</span>
<a name="l00628"></a>00628 <span class="comment">    \param buf The buffer to contain the data.</span>
<a name="l00629"></a>00629 <span class="comment">    \param max_len The maximum length of the chunk.</span>
<a name="l00630"></a>00630 <span class="comment">    \return The actual length of the chunk. */</span>
<a name="l00631"></a>00631 SPAN_DECLARE(<span class="keywordtype">int</span>) <a class="code" href="t30_8h.html#f9f792b42125363fe3762401933c56de">t30_non_ecm_get_chunk</a>(<span class="keywordtype">void</span> *user_data, uint8_t buf[], <span class="keywordtype">int</span> max_len);
<a name="l00632"></a>00632 <span class="comment"></span>
<a name="l00633"></a>00633 <span class="comment">/*! Process a bit of received non-ECM image data.</span>
<a name="l00634"></a>00634 <span class="comment">    \brief Process a bit of received non-ECM image data</span>
<a name="l00635"></a>00635 <span class="comment">    \param user_data An opaque pointer, which must point to the T.30 context.</span>
<a name="l00636"></a>00636 <span class="comment">    \param bit The received bit. */</span>
<a name="l00637"></a>00637 <a class="code" href="async_8h.html#e4a9785b72733643953caf7212ed5d78">SPAN_DECLARE_NONSTD</a>(<span class="keywordtype">void</span>) t30_non_ecm_put_bit(<span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> bit);
<a name="l00638"></a>00638 <span class="comment"></span>
<a name="l00639"></a>00639 <span class="comment">/*! Process a byte of received non-ECM image data.</span>
<a name="l00640"></a>00640 <span class="comment">    \brief Process a byte of received non-ECM image data</span>
<a name="l00641"></a>00641 <span class="comment">    \param user_data An opaque pointer, which must point to the T.30 context.</span>
<a name="l00642"></a>00642 <span class="comment">    \param byte The received byte. */</span>
<a name="l00643"></a>00643 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#2416e734360db0bc947fdb0079167adb">t30_non_ecm_put_byte</a>(<span class="keywordtype">void</span> *user_data, <span class="keywordtype">int</span> byte);
<a name="l00644"></a>00644 <span class="comment"></span>
<a name="l00645"></a>00645 <span class="comment">/*! Process a chunk of received non-ECM image data.</span>
<a name="l00646"></a>00646 <span class="comment">    \brief Process a chunk of received non-ECM image data</span>
<a name="l00647"></a>00647 <span class="comment">    \param user_data An opaque pointer, which must point to the T.30 context.</span>
<a name="l00648"></a>00648 <span class="comment">    \param buf The buffer containing the received data.</span>
<a name="l00649"></a>00649 <span class="comment">    \param len The length of the data in buf. */</span>
<a name="l00650"></a>00650 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#9e7defefa45157bad718cb8e50a8a06e">t30_non_ecm_put_chunk</a>(<span class="keywordtype">void</span> *user_data, const uint8_t buf[], <span class="keywordtype">int</span> len);
<a name="l00651"></a>00651 <span class="comment"></span>
<a name="l00652"></a>00652 <span class="comment">/*! Process a received HDLC frame.</span>
<a name="l00653"></a>00653 <span class="comment">    \brief Process a received HDLC frame.</span>
<a name="l00654"></a>00654 <span class="comment">    \param user_data The T.30 context.</span>
<a name="l00655"></a>00655 <span class="comment">    \param msg The HDLC message.</span>
<a name="l00656"></a>00656 <span class="comment">    \param len The length of the message, in octets.</span>
<a name="l00657"></a>00657 <span class="comment">    \param ok TRUE if the frame was received without error. */</span>
<a name="l00658"></a>00658 <a class="code" href="async_8h.html#e4a9785b72733643953caf7212ed5d78">SPAN_DECLARE_NONSTD</a>(<span class="keywordtype">void</span>) t30_hdlc_accept(<span class="keywordtype">void</span> *user_data, const uint8_t msg[], <span class="keywordtype">int</span> len, <span class="keywordtype">int</span> ok);
<a name="l00659"></a>00659 <span class="comment"></span>
<a name="l00660"></a>00660 <span class="comment">/*! Report the passage of time to the T.30 engine.</span>
<a name="l00661"></a>00661 <span class="comment">    \brief Report the passage of time to the T.30 engine.</span>
<a name="l00662"></a>00662 <span class="comment">    \param s The T.30 context.</span>
<a name="l00663"></a>00663 <span class="comment">    \param samples The time change in 1/8000th second steps. */</span>
<a name="l00664"></a>00664 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#12c1b9360e96a80bef110255fdfdbbc6">t30_timer_update</a>(t30_state_t *s, <span class="keywordtype">int</span> samples);
<a name="l00665"></a>00665 <span class="comment"></span>
<a name="l00666"></a>00666 <span class="comment">/*! Get the current transfer statistics for the file being sent or received.</span>
<a name="l00667"></a>00667 <span class="comment">    \brief Get the current transfer statistics.</span>
<a name="l00668"></a>00668 <span class="comment">    \param s The T.30 context.</span>
<a name="l00669"></a>00669 <span class="comment">    \param t A pointer to a buffer for the statistics. */</span>
<a name="l00670"></a>00670 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#776a76f7d85712073aa73bed806968ef">t30_get_transfer_statistics</a>(t30_state_t *s, t30_stats_t *t);
<a name="l00671"></a>00671 <span class="comment"></span>
<a name="l00672"></a>00672 <span class="comment">/*! Request a local interrupt of FAX exchange.</span>
<a name="l00673"></a>00673 <span class="comment">    \brief Request a local interrupt of FAX exchange.</span>
<a name="l00674"></a>00674 <span class="comment">    \param s The T.30 context.</span>
<a name="l00675"></a>00675 <span class="comment">    \param state TRUE to enable interrupt request, else FALSE. */</span>
<a name="l00676"></a>00676 SPAN_DECLARE(<span class="keywordtype">void</span>) <a class="code" href="t30_8h.html#cfdcea0a2422ff5a2f5054984e237d6b">t30_local_interrupt_request</a>(t30_state_t *s, <span class="keywordtype">int</span> state);
<a name="l00677"></a>00677 
<a name="l00678"></a>00678 <span class="preprocessor">#if defined(__cplusplus)</span>
<a name="l00679"></a>00679 <span class="preprocessor"></span>}
<a name="l00680"></a>00680 <span class="preprocessor">#endif</span>
<a name="l00681"></a>00681 <span class="preprocessor"></span>
<a name="l00682"></a>00682 <span class="preprocessor">#endif</span>
<a name="l00683"></a>00683 <span class="preprocessor"></span><span class="comment">/*- End of file ------------------------------------------------------------*/</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Wed Mar 17 10:16:36 2010 for spandsp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
