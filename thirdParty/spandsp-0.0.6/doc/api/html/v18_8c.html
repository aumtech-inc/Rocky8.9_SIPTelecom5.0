<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spandsp: v18.c File Reference</title>
<link href="css.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_0e7c2593c17df2b8598d85d379ada763.html">src</a></div>
<h1>v18.c File Reference</h1><code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;memory.h&gt;</code><br>
<code>#include &quot;floating_fudge.h&quot;</code><br>
<code>#include &quot;spandsp/telephony.h&quot;</code><br>
<code>#include &quot;<a class="el" href="logging_8h-source.html">spandsp/logging.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="queue_8h-source.html">spandsp/queue.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="async_8h-source.html">spandsp/async.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="complex_8h-source.html">spandsp/complex.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="dds_8h-source.html">spandsp/dds.h</a>&quot;</code><br>
<code>#include &quot;spandsp/tone_detect.h&quot;</code><br>
<code>#include &quot;<a class="el" href="tone__generate_8h-source.html">spandsp/tone_generate.h</a>&quot;</code><br>
<code>#include &quot;spandsp/super_tone_rx.h&quot;</code><br>
<code>#include &quot;spandsp/power_meter.h&quot;</code><br>
<code>#include &quot;<a class="el" href="fsk_8h-source.html">spandsp/fsk.h</a>&quot;</code><br>
<code>#include &quot;spandsp/dtmf.h&quot;</code><br>
<code>#include &quot;<a class="el" href="modem__connect__tones_8h-source.html">spandsp/modem_connect_tones.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="v8_8h-source.html">spandsp/v8.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="v18_8h-source.html">spandsp/v18.h</a>&quot;</code><br>
<code>#include &quot;spandsp/private/logging.h&quot;</code><br>
<code>#include &quot;spandsp/private/queue.h&quot;</code><br>
<code>#include &quot;spandsp/private/tone_generate.h&quot;</code><br>
<code>#include &quot;spandsp/private/async.h&quot;</code><br>
<code>#include &quot;spandsp/private/fsk.h&quot;</code><br>
<code>#include &quot;spandsp/private/dtmf.h&quot;</code><br>
<code>#include &quot;<a class="el" href="private_2modem__connect__tones_8h-source.html">spandsp/private/modem_connect_tones.h</a>&quot;</code><br>
<code>#include &quot;spandsp/private/v18.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><b>dtmf_to_ascii_s</b></td></tr>

<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#25d108c10737123a579614ba98389b21">BAUDOT_FIGURE_SHIFT</a>&nbsp;&nbsp;&nbsp;0x1B</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#1c3bae7dfa62ebf894d5b9a52e3b656d">BAUDOT_LETTER_SHIFT</a>&nbsp;&nbsp;&nbsp;0x1F</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#8398b0abe87c42ff4d1cd36f973a8759">v18_encode_dtmf</a> (v18_state_t *s, char dtmf[], const char msg[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a text string to a V.18 DTMF string.  <a href="#8398b0abe87c42ff4d1cd36f973a8759"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#aeaddedb8251169e2c0d70111d55dbe4">v18_decode_dtmf</a> (v18_state_t *s, char msg[], const char dtmf[])</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Convert a V.18 DTMF string to a text string.  <a href="#aeaddedb8251169e2c0d70111d55dbe4"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8f172e02a57a477fc372ac53c9aedd23"></a><!-- doxytag: member="v18.c::v18_encode_baudot" ref="8f172e02a57a477fc372ac53c9aedd23" args="(v18_state_t *s, uint8_t ch)" -->
uint16_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>v18_encode_baudot</b> (v18_state_t *s, uint8_t ch)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c753ea7cdeefb4b3ee858eb3f5414951"></a><!-- doxytag: member="v18.c::v18_decode_baudot" ref="c753ea7cdeefb4b3ee858eb3f5414951" args="(v18_state_t *s, uint8_t ch)" -->
uint8_t&nbsp;</td><td class="memItemRight" valign="bottom"><b>v18_decode_baudot</b> (v18_state_t *s, uint8_t ch)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="91e2fd636389b050af8e52b0cf836d7d"></a><!-- doxytag: member="v18.c::v18_tx" ref="91e2fd636389b050af8e52b0cf836d7d" args="(v18_state_t *s, int16_t *amp, int max_len)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>v18_tx</b> (v18_state_t *s, int16_t *amp, int max_len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b541abdc08c0c7fee394ab726392ded"></a><!-- doxytag: member="v18.c::v18_rx" ref="2b541abdc08c0c7fee394ab726392ded" args="(v18_state_t *s, const int16_t amp[], int len)" -->
int&nbsp;</td><td class="memItemRight" valign="bottom"><b>v18_rx</b> (v18_state_t *s, const int16_t amp[], int len)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#f70ef43b9d93686bab1d0ce9a727ee28">v18_put</a> (v18_state_t *s, const char msg[], int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put a string to a V.18 context's input buffer.  <a href="#f70ef43b9d93686bab1d0ce9a727ee28"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4c90e293d8f2ba2699c422ca9128665d"></a><!-- doxytag: member="v18.c::v18_get_logging_state" ref="4c90e293d8f2ba2699c422ca9128665d" args="(v18_state_t *s)" -->
<a class="el" href="structlogging__state__s.html">logging_state_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>v18_get_logging_state</b> (v18_state_t *s)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">v18_state_t *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#be161858b83a34b3adcf809952886887">v18_init</a> (v18_state_t *s, int calling_party, int mode, <a class="el" href="async_8h.html#82a49bbf79941c462b57b6773b26dd05">put_msg_func_t</a> put_msg, void *user_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise a V.18 context.  <a href="#be161858b83a34b3adcf809952886887"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#f8f7474617b54974ce2969f0e731122c">v18_release</a> (v18_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a V.18 context.  <a href="#f8f7474617b54974ce2969f0e731122c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#1baad77d83e1d2c5c1d75e7e5fb165be">v18_free</a> (v18_state_t *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a V.18 context.  <a href="#1baad77d83e1d2c5c1d75e7e5fb165be"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">const char *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="v18_8c.html#8c326e73623797a84682263d4ca4544f">v18_mode_to_str</a> (int mode)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return a short name for an V.18 mode.  <a href="#8c326e73623797a84682263d4ca4544f"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Define Documentation</h2>
<a class="anchor" name="25d108c10737123a579614ba98389b21"></a><!-- doxytag: member="v18.c::BAUDOT_FIGURE_SHIFT" ref="25d108c10737123a579614ba98389b21" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUDOT_FIGURE_SHIFT&nbsp;&nbsp;&nbsp;0x1B          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The baudot code to shift from alpha to digits and symbols 
</div>
</div><p>
<a class="anchor" name="1c3bae7dfa62ebf894d5b9a52e3b656d"></a><!-- doxytag: member="v18.c::BAUDOT_LETTER_SHIFT" ref="1c3bae7dfa62ebf894d5b9a52e3b656d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define BAUDOT_LETTER_SHIFT&nbsp;&nbsp;&nbsp;0x1F          </td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
The baudot code to shift from digits and symbols to alpha 
</div>
</div><p>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="aeaddedb8251169e2c0d70111d55dbe4"></a><!-- doxytag: member="v18.c::v18_decode_dtmf" ref="aeaddedb8251169e2c0d70111d55dbe4" args="(v18_state_t *s, char msg[], const char dtmf[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int v18_decode_dtmf           </td>
          <td>(</td>
          <td class="paramtype">v18_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>msg</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>dtmf</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a V.18 DTMF string to a text string. 
<p>
Convert a V.18 DTMF string to a text string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The V.18 context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The resulting test string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dtmf</em>&nbsp;</td><td>The DTMF string to be converted. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The length of the text string. </dd></dl>

</div>
</div><p>
<a class="anchor" name="8398b0abe87c42ff4d1cd36f973a8759"></a><!-- doxytag: member="v18.c::v18_encode_dtmf" ref="8398b0abe87c42ff4d1cd36f973a8759" args="(v18_state_t *s, char dtmf[], const char msg[])" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int v18_encode_dtmf           </td>
          <td>(</td>
          <td class="paramtype">v18_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char&nbsp;</td>
          <td class="paramname"> <em>dtmf</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>msg</em>[]</td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Convert a text string to a V.18 DTMF string. 
<p>
Convert a text string to a V.18 DTMF string. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The V.18 context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>dtmf</em>&nbsp;</td><td>The resulting DTMF string. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The text string to be converted. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The length of the DTMF string. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1baad77d83e1d2c5c1d75e7e5fb165be"></a><!-- doxytag: member="v18.c::v18_free" ref="1baad77d83e1d2c5c1d75e7e5fb165be" args="(v18_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int v18_free           </td>
          <td>(</td>
          <td class="paramtype">v18_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Release a V.18 context. 
<p>
Free a V.18 context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The V.18 context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK. </dd></dl>

</div>
</div><p>
<a class="anchor" name="be161858b83a34b3adcf809952886887"></a><!-- doxytag: member="v18.c::v18_init" ref="be161858b83a34b3adcf809952886887" args="(v18_state_t *s, int calling_party, int mode, put_msg_func_t put_msg, void *user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">v18_state_t* v18_init           </td>
          <td>(</td>
          <td class="paramtype">v18_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>calling_party</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mode</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="async_8h.html#82a49bbf79941c462b57b6773b26dd05">put_msg_func_t</a>&nbsp;</td>
          <td class="paramname"> <em>put_msg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise a V.18 context. 
<p>
Initialise a V.18 context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The V.18 context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>calling_party</em>&nbsp;</td><td>TRUE if caller mode, else answerer mode. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>Mode of operation. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>put_msg</em>&nbsp;</td><td>A callback routine called to deliver the received text to the application. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>An opaque pointer for the callback routine. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the V.18 context, or NULL if there was a problem. </dd></dl>

</div>
</div><p>
<a class="anchor" name="8c326e73623797a84682263d4ca4544f"></a><!-- doxytag: member="v18.c::v18_mode_to_str" ref="8c326e73623797a84682263d4ca4544f" args="(int mode)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* v18_mode_to_str           </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>mode</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return a short name for an V.18 mode. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>mode</em>&nbsp;</td><td>The code for the V.18 mode. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the name. </dd></dl>

</div>
</div><p>
<a class="anchor" name="f70ef43b9d93686bab1d0ce9a727ee28"></a><!-- doxytag: member="v18.c::v18_put" ref="f70ef43b9d93686bab1d0ce9a727ee28" args="(v18_state_t *s, const char msg[], int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int v18_put           </td>
          <td>(</td>
          <td class="paramtype">v18_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char&nbsp;</td>
          <td class="paramname"> <em>msg</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put a string to a V.18 context's input buffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The V.18 context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>msg</em>&nbsp;</td><td>The string to be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The length of the string. If negative, the string is assumed to be a NULL terminated string. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of characters actually added. This may be less than the length of the digit string, if the buffer fills up. If the string is invalid, this function will return -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="f8f7474617b54974ce2969f0e731122c"></a><!-- doxytag: member="v18.c::v18_release" ref="f8f7474617b54974ce2969f0e731122c" args="(v18_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int v18_release           </td>
          <td>(</td>
          <td class="paramtype">v18_state_t *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Release a V.18 context. 
<p>
Release a V.18 context. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The V.18 context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK. </dd></dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Mar 17 10:16:38 2010 for spandsp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
