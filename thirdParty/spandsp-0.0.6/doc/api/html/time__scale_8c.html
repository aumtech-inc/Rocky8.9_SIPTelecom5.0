<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spandsp: time_scale.c File Reference</title>
<link href="css.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_0e7c2593c17df2b8598d85d379ada763.html">src</a></div>
<h1>time_scale.c File Reference</h1><code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;limits.h&gt;</code><br>
<code>#include &quot;floating_fudge.h&quot;</code><br>
<code>#include &quot;spandsp/telephony.h&quot;</code><br>
<code>#include &quot;spandsp/fast_convert.h&quot;</code><br>
<code>#include &quot;spandsp/time_scale.h&quot;</code><br>
<code>#include &quot;<a class="el" href="saturated_8h-source.html">spandsp/saturated.h</a>&quot;</code><br>
<code>#include &quot;spandsp/private/time_scale.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#1b25fc362733dcb2eaf07631c82452d8">time_scale_rate</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, float playout_rate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the time scale rate.  <a href="#1b25fc362733dcb2eaf07631c82452d8"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#3b40dfa83181a7096fb2a6779add3ace">time_scale_init</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int sample_rate, float playout_rate)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise a time scale context.  <a href="#3b40dfa83181a7096fb2a6779add3ace"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#ae185090ffb2b3fe9b8e97003bb64853">time_scale_release</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a time scale context.  <a href="#ae185090ffb2b3fe9b8e97003bb64853"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#90b26de72050f72ebf5cf42334ecf743">time_scale_free</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a time scale context.  <a href="#90b26de72050f72ebf5cf42334ecf743"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#93c9a1e29a9599e58cd67a116e8f6ca9">time_scale</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int16_t out[], int16_t in[], int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Time scale a chunk of audio samples.  <a href="#93c9a1e29a9599e58cd67a116e8f6ca9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="time__scale_8c.html#2aec7a7a04b260c861c599ce4e348a39">time_scale_max_output_len</a> (<a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *s, int input_len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find the maximum possible output samples.  <a href="#2aec7a7a04b260c861c599ce4e348a39"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="93c9a1e29a9599e58cd67a116e8f6ca9"></a><!-- doxytag: member="time_scale.c::time_scale" ref="93c9a1e29a9599e58cd67a116e8f6ca9" args="(time_scale_state_t *s, int16_t out[], int16_t in[], int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>out</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>in</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Time scale a chunk of audio samples. 
<p>
Time scale a chunk of audio samples. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The time scale context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>out</em>&nbsp;</td><td>The output audio sample buffer. This must be large enough to accept the longest possible result from processing the input data. See the algorithm documentation for how the longest possible result may be calculated. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>in</em>&nbsp;</td><td>The input audio sample buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The number of input samples. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of output samples. </dd></dl>

</div>
</div><p>
<a class="anchor" name="90b26de72050f72ebf5cf42334ecf743"></a><!-- doxytag: member="time_scale.c::time_scale_free" ref="90b26de72050f72ebf5cf42334ecf743" args="(time_scale_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_free           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free a time scale context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The time scale context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3b40dfa83181a7096fb2a6779add3ace"></a><!-- doxytag: member="time_scale.c::time_scale_init" ref="3b40dfa83181a7096fb2a6779add3ace" args="(time_scale_state_t *s, int sample_rate, float playout_rate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a>* time_scale_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>sample_rate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>playout_rate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise a time scale context. 
<p>
Initialise a time scale context. This must be called before the first use of the context, to initialise its contents. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The time scale context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>sample_rate</em>&nbsp;</td><td>The sample rate of the signal. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>playout_rate</em>&nbsp;</td><td>The ratio between the output speed and the input speed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the context, or NULL if there was a problem. </dd></dl>

</div>
</div><p>
<a class="anchor" name="2aec7a7a04b260c861c599ce4e348a39"></a><!-- doxytag: member="time_scale.c::time_scale_max_output_len" ref="2aec7a7a04b260c861c599ce4e348a39" args="(time_scale_state_t *s, int input_len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_max_output_len           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>input_len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Find the maximum possible output samples. 
<p>
Find the maximum possible samples which could result from scaling the specified number of input samples, at the current playback rate. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The time scale context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>input_len</em>&nbsp;</td><td>The number of input samples. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The maximum possible output samples. </dd></dl>

</div>
</div><p>
<a class="anchor" name="1b25fc362733dcb2eaf07631c82452d8"></a><!-- doxytag: member="time_scale.c::time_scale_rate" ref="1b25fc362733dcb2eaf07631c82452d8" args="(time_scale_state_t *s, float playout_rate)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_rate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">float&nbsp;</td>
          <td class="paramname"> <em>playout_rate</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the time scale rate. 
<p>
Change the time scale rate. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The time scale context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>playout_rate</em>&nbsp;</td><td>The ratio between the output speed and the input speed. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 if changed OK, else -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ae185090ffb2b3fe9b8e97003bb64853"></a><!-- doxytag: member="time_scale.c::time_scale_release" ref="ae185090ffb2b3fe9b8e97003bb64853" args="(time_scale_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int time_scale_release           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structtime__scale__state__s.html">time_scale_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Release a time scale context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The time scale context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Mar 17 10:16:38 2010 for spandsp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
