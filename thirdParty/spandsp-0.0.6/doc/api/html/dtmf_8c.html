<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>spandsp: dtmf.c File Reference</title>
<link href="css.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Classes</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="dirs.html"><span>Directories</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>File&nbsp;Members</span></a></li>
  </ul></div>
<div class="nav">
<a class="el" href="dir_0e7c2593c17df2b8598d85d379ada763.html">src</a></div>
<h1>dtmf.c File Reference</h1><code>#include &lt;inttypes.h&gt;</code><br>
<code>#include &lt;stdlib.h&gt;</code><br>
<code>#include &quot;floating_fudge.h&quot;</code><br>
<code>#include &lt;string.h&gt;</code><br>
<code>#include &lt;stdio.h&gt;</code><br>
<code>#include &lt;time.h&gt;</code><br>
<code>#include &lt;fcntl.h&gt;</code><br>
<code>#include &quot;spandsp/telephony.h&quot;</code><br>
<code>#include &quot;spandsp/fast_convert.h&quot;</code><br>
<code>#include &quot;<a class="el" href="queue_8h-source.html">spandsp/queue.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="complex_8h-source.html">spandsp/complex.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="dds_8h-source.html">spandsp/dds.h</a>&quot;</code><br>
<code>#include &quot;spandsp/tone_detect.h&quot;</code><br>
<code>#include &quot;<a class="el" href="tone__generate_8h-source.html">spandsp/tone_generate.h</a>&quot;</code><br>
<code>#include &quot;spandsp/super_tone_rx.h&quot;</code><br>
<code>#include &quot;spandsp/dtmf.h&quot;</code><br>
<code>#include &quot;spandsp/private/queue.h&quot;</code><br>
<code>#include &quot;spandsp/private/tone_generate.h&quot;</code><br>
<code>#include &quot;spandsp/private/dtmf.h&quot;</code><br>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c1983baac730b31471d3d28de4ae698a"></a><!-- doxytag: member="dtmf.c::DEFAULT_DTMF_TX_LEVEL" ref="c1983baac730b31471d3d28de4ae698a" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_DTMF_TX_LEVEL</b>&nbsp;&nbsp;&nbsp;-10</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="e31684e180bac8fb919a2dbfd1f14d80"></a><!-- doxytag: member="dtmf.c::DEFAULT_DTMF_TX_ON_TIME" ref="e31684e180bac8fb919a2dbfd1f14d80" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_DTMF_TX_ON_TIME</b>&nbsp;&nbsp;&nbsp;50</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9a081369d6085bffa3708058c13ff344"></a><!-- doxytag: member="dtmf.c::DEFAULT_DTMF_TX_OFF_TIME" ref="9a081369d6085bffa3708058c13ff344" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DEFAULT_DTMF_TX_OFF_TIME</b>&nbsp;&nbsp;&nbsp;55</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4dfb0e44eab6c69bc0e2573adb252d1c"></a><!-- doxytag: member="dtmf.c::DTMF_THRESHOLD" ref="4dfb0e44eab6c69bc0e2573adb252d1c" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_THRESHOLD</b>&nbsp;&nbsp;&nbsp;171032462.0f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1953e86d2d7edc9b5b6b8ec971deff40"></a><!-- doxytag: member="dtmf.c::DTMF_NORMAL_TWIST" ref="1953e86d2d7edc9b5b6b8ec971deff40" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_NORMAL_TWIST</b>&nbsp;&nbsp;&nbsp;6.309f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3b610b401e1e3dd15c8b501ea33519cd"></a><!-- doxytag: member="dtmf.c::DTMF_REVERSE_TWIST" ref="3b610b401e1e3dd15c8b501ea33519cd" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_REVERSE_TWIST</b>&nbsp;&nbsp;&nbsp;2.512f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b2849942f55808d209a04916de88c6bb"></a><!-- doxytag: member="dtmf.c::DTMF_RELATIVE_PEAK_ROW" ref="b2849942f55808d209a04916de88c6bb" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_RELATIVE_PEAK_ROW</b>&nbsp;&nbsp;&nbsp;6.309f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7d287bf752cc52501e908920bdeda015"></a><!-- doxytag: member="dtmf.c::DTMF_RELATIVE_PEAK_COL" ref="7d287bf752cc52501e908920bdeda015" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_RELATIVE_PEAK_COL</b>&nbsp;&nbsp;&nbsp;6.309f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="17557ece45a1ac2458c2a109ea80d84e"></a><!-- doxytag: member="dtmf.c::DTMF_TO_TOTAL_ENERGY" ref="17557ece45a1ac2458c2a109ea80d84e" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_TO_TOTAL_ENERGY</b>&nbsp;&nbsp;&nbsp;83.868f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="da115a7045d2668e2d1068c0e224ca48"></a><!-- doxytag: member="dtmf.c::DTMF_POWER_OFFSET" ref="da115a7045d2668e2d1068c0e224ca48" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_POWER_OFFSET</b>&nbsp;&nbsp;&nbsp;110.395f</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4666e6b48e31f9aeb5b5608285c7eda1"></a><!-- doxytag: member="dtmf.c::DTMF_SAMPLES_PER_BLOCK" ref="4666e6b48e31f9aeb5b5608285c7eda1" args="" -->
#define&nbsp;</td><td class="memItemRight" valign="bottom"><b>DTMF_SAMPLES_PER_BLOCK</b>&nbsp;&nbsp;&nbsp;102</td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#a9d9463fe8ff81a5b674b4304c538e49">dtmf_rx</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s, const int16_t amp[], int samples)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Process a block of received DTMF audio samples.  <a href="#a9d9463fe8ff81a5b674b4304c538e49"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#8b82652ea1a24f6108ab8731860d78ae">dtmf_rx_status</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get the status of DTMF detection during processing of the last audio chunk.  <a href="#8b82652ea1a24f6108ab8731860d78ae"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">size_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#56aa640b099011f899d59dcdef3bb15c">dtmf_rx_get</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s, char *buf, int max)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Get a string of digits from a DTMF receiver's output buffer.  <a href="#56aa640b099011f899d59dcdef3bb15c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#3ae6da217024d7bab103884677e984c0">dtmf_rx_set_realtime_callback</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s, tone_report_func_t callback, void *user_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set a realtime callback for a DTMF receiver context.  <a href="#3ae6da217024d7bab103884677e984c0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#e955edf880cb4dea39f5a9bfaddc4dbb">dtmf_rx_parms</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s, int filter_dialtone, int twist, int reverse_twist, int threshold)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Adjust a DTMF receiver context.  <a href="#e955edf880cb4dea39f5a9bfaddc4dbb"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#f045505b7cecb66e53f27dabf4551136">dtmf_rx_init</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s, digits_rx_callback_t callback, void *user_data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise a DTMF receiver context.  <a href="#f045505b7cecb66e53f27dabf4551136"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#d51897df15b4c4fe5ddca68a46ef7819">dtmf_rx_release</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a DTMF receiver context.  <a href="#d51897df15b4c4fe5ddca68a46ef7819"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#a99995d8752aa6298cb8b8b3aa1c29cc">dtmf_rx_free</a> (<a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a DTMF receiver context.  <a href="#a99995d8752aa6298cb8b8b3aa1c29cc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#719b92fb0f97031309b82f6d45f6b4d0">dtmf_tx</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s, int16_t amp[], int max_samples)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Generate a buffer of DTMF tones.  <a href="#719b92fb0f97031309b82f6d45f6b4d0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#db4801de4c7be71cc6f91244aa5c17c2">dtmf_tx_put</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s, const char *digits, int len)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Put a string of digits in a DTMF generator's input buffer.  <a href="#db4801de4c7be71cc6f91244aa5c17c2"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#0f2ad83c3e88b38dda9ac8f218acac1c">dtmf_tx_set_level</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s, int level, int twist)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the transmit level for a DTMF tone generator context.  <a href="#0f2ad83c3e88b38dda9ac8f218acac1c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#f434c1f1cfc9c24b63e4334c1802821b">dtmf_tx_set_timing</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s, int on_time, int off_time)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Change the transmit on and off time for a DTMF tone generator context.  <a href="#f434c1f1cfc9c24b63e4334c1802821b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#ef12b2313443c2a81b69b0ea6518b59c">dtmf_tx_init</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Initialise a DTMF tone generator context.  <a href="#ef12b2313443c2a81b69b0ea6518b59c"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#e934c58e54e63d0ac856dd5d78a0efa5">dtmf_tx_release</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Release a DTMF tone generator context.  <a href="#e934c58e54e63d0ac856dd5d78a0efa5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="dtmf_8c.html#5027a1aeefc46406ab41f759c4e7d714">dtmf_tx_free</a> (<a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *s)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free a DTMF tone generator context.  <a href="#5027a1aeefc46406ab41f759c4e7d714"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="a9d9463fe8ff81a5b674b4304c538e49"></a><!-- doxytag: member="dtmf.c::dtmf_rx" ref="a9d9463fe8ff81a5b674b4304c538e49" args="(dtmf_rx_state_t *s, const int16_t amp[], int samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_rx           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const int16_t&nbsp;</td>
          <td class="paramname"> <em>amp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Process a block of received DTMF audio samples. 
<p>
Process a block of received DTMF audio samples. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>amp</em>&nbsp;</td><td>The audio sample buffer. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>samples</em>&nbsp;</td><td>The number of samples in the buffer. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of samples unprocessed. </dd></dl>

</div>
</div><p>
<a class="anchor" name="a99995d8752aa6298cb8b8b3aa1c29cc"></a><!-- doxytag: member="dtmf.c::dtmf_rx_free" ref="a99995d8752aa6298cb8b8b3aa1c29cc" args="(dtmf_rx_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_rx_free           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free a DTMF receiver context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="56aa640b099011f899d59dcdef3bb15c"></a><!-- doxytag: member="dtmf.c::dtmf_rx_get" ref="56aa640b099011f899d59dcdef3bb15c" args="(dtmf_rx_state_t *s, char *buf, int max)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t dtmf_rx_get           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&nbsp;</td>
          <td class="paramname"> <em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get a string of digits from a DTMF receiver's output buffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>digits</em>&nbsp;</td><td>The buffer for the received digits. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max</em>&nbsp;</td><td>The maximum number of digits to be returned, </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of digits actually returned. </dd></dl>

</div>
</div><p>
<a class="anchor" name="f045505b7cecb66e53f27dabf4551136"></a><!-- doxytag: member="dtmf.c::dtmf_rx_init" ref="f045505b7cecb66e53f27dabf4551136" args="(dtmf_rx_state_t *s, digits_rx_callback_t callback, void *user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a>* dtmf_rx_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">digits_rx_callback_t&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise a DTMF receiver context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>An optional callback routine, used to report received digits. If no callback routine is set, digits may be collected, using the <a class="el" href="dtmf_8c.html#56aa640b099011f899d59dcdef3bb15c">dtmf_rx_get()</a> function. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>An opaque pointer which is associated with the context, and supplied in callbacks. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the DTMF receiver context. </dd></dl>

</div>
</div><p>
<a class="anchor" name="e955edf880cb4dea39f5a9bfaddc4dbb"></a><!-- doxytag: member="dtmf.c::dtmf_rx_parms" ref="e955edf880cb4dea39f5a9bfaddc4dbb" args="(dtmf_rx_state_t *s, int filter_dialtone, int twist, int reverse_twist, int threshold)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dtmf_rx_parms           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>filter_dialtone</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>reverse_twist</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>threshold</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Adjust a DTMF receiver context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>filter_dialtone</em>&nbsp;</td><td>TRUE to enable filtering of dialtone, FALSE to disable, &lt; 0 to leave unchanged. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>twist</em>&nbsp;</td><td>Acceptable twist, in dB. &lt; 0 to leave unchanged. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>reverse_twist</em>&nbsp;</td><td>Acceptable reverse twist, in dB. &lt; 0 to leave unchanged. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>threshold</em>&nbsp;</td><td>The minimum acceptable tone level for detection, in dBm0. &lt;= -99 to leave unchanged. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="d51897df15b4c4fe5ddca68a46ef7819"></a><!-- doxytag: member="dtmf.c::dtmf_rx_release" ref="d51897df15b4c4fe5ddca68a46ef7819" args="(dtmf_rx_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_rx_release           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Release a DTMF receiver context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="3ae6da217024d7bab103884677e984c0"></a><!-- doxytag: member="dtmf.c::dtmf_rx_set_realtime_callback" ref="3ae6da217024d7bab103884677e984c0" args="(dtmf_rx_state_t *s, tone_report_func_t callback, void *user_data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dtmf_rx_set_realtime_callback           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">tone_report_func_t&nbsp;</td>
          <td class="paramname"> <em>callback</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&nbsp;</td>
          <td class="paramname"> <em>user_data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Set a realtime callback for a DTMF receiver context. 
<p>
Set a optional realtime callback for a DTMF receiver context. This function is called immediately a confirmed state change occurs in the received DTMF. It is called with the ASCII value for a DTMF tone pair, or zero to indicate no tone is being received. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>callback</em>&nbsp;</td><td>Callback routine used to report the start and end of digits. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>user_data</em>&nbsp;</td><td>An opaque pointer which is associated with the context, and supplied in callbacks. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="8b82652ea1a24f6108ab8731860d78ae"></a><!-- doxytag: member="dtmf.c::dtmf_rx_status" ref="8b82652ea1a24f6108ab8731860d78ae" args="(dtmf_rx_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_rx_status           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__rx__state__s.html">dtmf_rx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Get the status of DTMF detection during processing of the last audio chunk. 
<p>
Get the status of DTMF detection during processing of the last audio chunk. <dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF receiver context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The current digit status. Either 'x' for a "maybe" condition, or the digit being detected. </dd></dl>

</div>
</div><p>
<a class="anchor" name="719b92fb0f97031309b82f6d45f6b4d0"></a><!-- doxytag: member="dtmf.c::dtmf_tx" ref="719b92fb0f97031309b82f6d45f6b4d0" args="(dtmf_tx_state_t *s, int16_t amp[], int max_samples)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_tx           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&nbsp;</td>
          <td class="paramname"> <em>amp</em>[], </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>max_samples</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Generate a buffer of DTMF tones. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>amp</em>&nbsp;</td><td>The buffer for the generated signal. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>max_samples</em>&nbsp;</td><td>The required number of generated samples. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of samples actually generated. This may be less than max_samples if the input buffer empties. </dd></dl>

</div>
</div><p>
<a class="anchor" name="5027a1aeefc46406ab41f759c4e7d714"></a><!-- doxytag: member="dtmf.c::dtmf_tx_free" ref="5027a1aeefc46406ab41f759c4e7d714" args="(dtmf_tx_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_tx_free           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Free a DTMF tone generator context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF tone generator context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="ef12b2313443c2a81b69b0ea6518b59c"></a><!-- doxytag: member="dtmf.c::dtmf_tx_init" ref="ef12b2313443c2a81b69b0ea6518b59c" args="(dtmf_tx_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a>* dtmf_tx_init           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Initialise a DTMF tone generator context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF generator context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>A pointer to the DTMF generator context. </dd></dl>

</div>
</div><p>
<a class="anchor" name="db4801de4c7be71cc6f91244aa5c17c2"></a><!-- doxytag: member="dtmf.c::dtmf_tx_put" ref="db4801de4c7be71cc6f91244aa5c17c2" args="(dtmf_tx_state_t *s, const char *digits, int len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_tx_put           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&nbsp;</td>
          <td class="paramname"> <em>digits</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>len</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Put a string of digits in a DTMF generator's input buffer. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>digits</em>&nbsp;</td><td>The string of digits to be added. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>len</em>&nbsp;</td><td>The length of the string of digits. If negative, the string is assumed to be a NULL terminated string. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>The number of digits actually added. This may be less than the length of the digit string, if the buffer fills up. </dd></dl>

</div>
</div><p>
<a class="anchor" name="e934c58e54e63d0ac856dd5d78a0efa5"></a><!-- doxytag: member="dtmf.c::dtmf_tx_release" ref="e934c58e54e63d0ac856dd5d78a0efa5" args="(dtmf_tx_state_t *s)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int dtmf_tx_release           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Release a DTMF tone generator context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF tone generator context. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Returns:</b></dt><dd>0 for OK, else -1. </dd></dl>

</div>
</div><p>
<a class="anchor" name="0f2ad83c3e88b38dda9ac8f218acac1c"></a><!-- doxytag: member="dtmf.c::dtmf_tx_set_level" ref="0f2ad83c3e88b38dda9ac8f218acac1c" args="(dtmf_tx_state_t *s, int level, int twist)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dtmf_tx_set_level           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>level</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>twist</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the transmit level for a DTMF tone generator context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>level</em>&nbsp;</td><td>The level of the low tone, in dBm0. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>twist</em>&nbsp;</td><td>The twist, in dB. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="f434c1f1cfc9c24b63e4334c1802821b"></a><!-- doxytag: member="dtmf.c::dtmf_tx_set_timing" ref="f434c1f1cfc9c24b63e4334c1802821b" args="(dtmf_tx_state_t *s, int on_time, int off_time)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dtmf_tx_set_timing           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structdtmf__tx__state__s.html">dtmf_tx_state_t</a> *&nbsp;</td>
          <td class="paramname"> <em>s</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>on_time</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>off_time</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Change the transmit on and off time for a DTMF tone generator context. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>s</em>&nbsp;</td><td>The DTMF generator context. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>on-time</em>&nbsp;</td><td>The on time, in ms. </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>off_time</em>&nbsp;</td><td>The off time, in ms. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Wed Mar 17 10:16:37 2010 for spandsp by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
